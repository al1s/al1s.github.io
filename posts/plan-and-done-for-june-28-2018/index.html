<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Plan and done for June-28-2018 | Learn another day</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (ru)" href="../../ru/rss.xml">
<link rel="canonical" href="https://al1s.github.io/posts/plan-and-done-for-june-28-2018/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="alstof">
<link rel="prev" href="../plan-and-done-for-may-27-2018/" title="Plan and done for May-27-2018" type="text/html">
<link rel="next" href="../plan-and-done-for-july-15-2018/" title="Plan and done for July-15-2018" type="text/html">
<meta property="og:site_name" content="Learn another day">
<meta property="og:title" content="Plan and done for June-28-2018">
<meta property="og:url" content="https://al1s.github.io/posts/plan-and-done-for-june-28-2018/">
<meta property="og:description" content="What will I learn today?

Learn D3 fundamentals.
Practice D3 selections.



Done

There are bunch of links to good articles to grasp what D3 is about:

Bostock's entry point with many links inside;
El">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-06-28T03:23:31-07:00">
<meta property="article:tag" content="D3">
<meta property="article:tag" content="JS">
<meta property="article:tag" content="web-dev">
<link rel="alternate" hreflang="ru" href="../../ru/posts/plan-and-done-for-june-28-2018/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://al1s.github.io/">

                <span id="blog-title">Learn another day</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
            </li>
<li><a href="https://al1s.github.io/ru/" rel="alternate" hreflang="ru">Русский</a></li>

                
                    
    <li>
    <a href="index.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Plan and done for June-28-2018</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    alstof
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-06-28T03:23:31-07:00" itemprop="datePublished" title="2018-06-28 03:23">2018-06-28 03:23</time></a></p>
            
        <p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Learn D3 fundamentals.</li>
<li>Practice D3 selections.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic">
<li>
<p class="first">There are bunch of links to good articles to grasp what D3 is about:</p>
<ul class="simple">
<li>
<a class="reference external" href="https://bl.ocks.org/mbostock/3808234">Bostock's entry point</a> with many links inside;</li>
<li><a class="reference external" href="https://medium.com/@Elijah_Meeks/d3-is-not-a-data-visualization-library-67ba549e8520">Elijah Meeks explanation</a></li>
</ul>
</li>
<li>
<p class="first">It takes some time to grasp how selection works in D3. Misunderstanding starts from <a class="reference external" href="https://www.youtube.com/watch?v=8jvoTV54nX://www.youtube.com/watch?v=8jvoTV54nXw">Introduction to D3</a> by Curran Kelleher and his <a class="reference external" href="http://curran.github.io/screencasts/introToD3/examples/viewer/#/66">notebooks</a>. If Update and Enter are different selections, then why when I set X coordinate and block color for update selection only, the whole result is correct - the color of all blocks is the same and they are divided appropriately along X axis?</p>
<p>The only explanation is that there is only the whole cycle every time and all objects are involved:</p>
<ul class="simple">
<li>after <code>selection.data()</code> we have empty placeholder for each data point in a dataset;</li>
<li>after <code>selection.enter()</code> we have DOM constructed accroding to data and attributes defined on stage 'Enter' applied to each new element;</li>
<li>after <code>selection.update()</code> we have additional attributes applied to 'old' elements, those which weren't added during Enter processing... and (it was the main bug in my understanding of the rendering stages in D3) to new elements if the attributes weren't defined during 'Enter' and defined on 'Update' stage;</li>
<li>
<code>select.exit().remove()</code> just removes unbound elements; something like a garbage collection.</li>
</ul>
<p>In order to illustrate notes above I crafted two versions of the code:</p>
</li>
</ol>
<pre class="code javascript"><a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-1"></a><span class="kd">function</span> <span class="nx">render</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">color</span><span class="p">){</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-2"></a>  <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-3"></a>     <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mi">2750</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-4"></a>  <span class="kd">var</span> <span class="nx">rects</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">"rect"</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-5"></a>  <span class="nx">console</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="s1">'Render'</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-6"></a>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-7"></a>  <span class="c1">// Enter</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-8"></a>  <span class="nx">log</span><span class="p">(</span><span class="s1">'Before enter'</span><span class="p">,</span> <span class="nx">rects</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-9"></a>  <span class="nx">rects</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">"rect"</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-10"></a>    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"y"</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-11"></a>    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span>  <span class="mi">20</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-12"></a>    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"height"</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-13"></a>    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill-opacity"</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-14"></a>  <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-15"></a>    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill-opacity"</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-16"></a>  <span class="nx">log</span><span class="p">(</span><span class="s1">'After enter'</span><span class="p">,</span> <span class="nx">rects</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-17"></a>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-18"></a>  <span class="c1">// Update</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-19"></a>  <span class="nx">rects</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-20"></a>    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"fill"</span><span class="p">,</span> <span class="nx">color</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-21"></a>    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="nx">scale</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-22"></a>  <span class="nx">log</span><span class="p">(</span><span class="s1">'After update'</span><span class="p">,</span> <span class="nx">rects</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-23"></a>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-24"></a>  <span class="c1">// Exit</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-25"></a>  <span class="nx">rects</span><span class="p">.</span><span class="nx">exit</span><span class="p">().</span><span class="nx">remove</span><span class="p">()</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-26"></a>    <span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-27"></a>    <span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"fill-opacity"</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-28"></a>  <span class="nx">log</span><span class="p">(</span><span class="s1">'After exit'</span><span class="p">,</span> <span class="nx">rects</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-29"></a>  <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">(</span><span class="s1">'Render'</span><span class="p">)</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-30"></a>  <span class="p">}</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-31"></a>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-32"></a><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">render</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"red"</span><span class="p">),</span><span class="mi">0</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-33"></a><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">render</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s2">"blue"</span><span class="p">),</span><span class="mi">2500</span><span class="p">);</span>
<a name="rest_code_130f0f4f22e44f2e8a41c9e74608dc95-34"></a><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">render</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"green"</span><span class="p">),</span><span class="mi">5000</span><span class="p">)</span>
</pre>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/d3/" rel="tag">D3</a></li>
            <li><a class="tag p-category" href="../../categories/js/" rel="tag">JS</a></li>
            <li><a class="tag p-category" href="../../categories/web-dev/" rel="tag">web-dev</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../plan-and-done-for-may-27-2018/" rel="prev" title="Plan and done for May-27-2018">Previous post</a>
            </li>
            <li class="next">
                <a href="../plan-and-done-for-july-15-2018/" rel="next" title="Plan and done for July-15-2018">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:alstof@gmail.com">alstof</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
