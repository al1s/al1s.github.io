<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="ru">
<head>
<meta charset="utf-8">
<meta name="description" content="Notes collection">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Learn another day (7 страница со старыми записями) | Learn another day</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (ru)" href="rss.xml">
<link rel="canonical" href="https://al1s.github.io/ru/index-7.html">
<link rel="prev" href="index-8.html" type="text/html">
<link rel="next" href="index-6.html" type="text/html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Перейти к главному содержимому</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Включить навигацию</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://al1s.github.io/ru/">

                <span id="blog-title">Learn another day</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Архив</a>
                </li>
<li>
<a href="categories/">Тэги</a>
                </li>
<li>
<a href="rss.xml">RSS лента</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
            </li>
<li><a href="https://al1s.github.io/" rel="alternate" hreflang="en">English</a></li>

                
                    
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-11-2017/" class="u-url">Plan and done for June-11-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-11-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-11T12:20:31-07:00" title="2017-06-11 12:20">2017-06-11 12:20</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Dive into JS.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic">
<li>
<p class="first">What is this all about - <a class="reference external" href="http://al1s.github.io/posts/plan-and-done-for-may-25-2017/">http://al1s.github.io/posts/plan-and-done-for-may-25-2017/</a>.</p>
<p>Day 13 - show pictures only if they are in a visible part of a screen. And yes it is not a screen, it's a viewport - visible part of a document. Its dimensions are properties either <code>window</code> or <code>document.documentElement</code> objects (here is excerpts from spec - <a class="reference external" href="https://stackoverflow.com/a/7205786">https://stackoverflow.com/a/7205786</a>), so the task is simple - check on scroll if relative element position less then a viewport. How to find relative position? Here is a method <code>getBoundingClientRect()</code>. And to toggle classes on an element I have <code>classList</code> methods - add and remove.</p>
<p>More broad solution - lazy images loading - is here - <a class="reference external" href="https://css-tricks.com/snippets/javascript/lazy-loading-images/">https://css-tricks.com/snippets/javascript/lazy-loading-images/</a>.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-09-2017/" class="u-url">Plan and done for June-09-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-09-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-09T17:02:31-07:00" title="2017-06-09 17:02">2017-06-09 17:02</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Dive into JS.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic">
<li>
<p class="first">What is this all about - <a class="reference external" href="http://al1s.github.io/posts/plan-and-done-for-may-25-2017/">http://al1s.github.io/posts/plan-and-done-for-may-25-2017/</a>.</p>
<p>Day 12 - Draw unicorns all around the page on KONAMI code key sequence. Here is about KONAMI code - <a class="reference external" href="https://en.wikipedia.org/wiki/Konami_Code">https://en.wikipedia.org/wiki/Konami_Code</a>. And here is cornifier - <a class="reference external" href="https://github.com/Cornify/Cornify/blob/master/js/cornify.js">https://github.com/Cornify/Cornify/blob/master/js/cornify.js</a>.</p>
<p>User story:</p>
<ul class="simple">
<li>As a user, I want to press key sequence (KONAMI), so that I'll get a unicorn or a rainbow on the page.</li>
<li>As a user, I want to press than any key, so that I'll get more unicorns and rainbows on the page, one per each key pressed.</li>
</ul>
<p>Done. It was the simplest one among JS30. Here is a little about keypress event and the right property to get key code - <a class="reference external" href="https://css-tricks.com/snippets/javascript/javascript-keycodes/">https://css-tricks.com/snippets/javascript/javascript-keycodes/</a>.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-08-2017/" class="u-url">Plan and done for June-08-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-08-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-08T16:05:31-07:00" title="2017-06-08 16:05">2017-06-08 16:05</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Dive into JS.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic">
<li>
<p class="first">What is this all about - <a class="reference external" href="http://al1s.github.io/posts/plan-and-done-for-may-25-2017/">http://al1s.github.io/posts/plan-and-done-for-may-25-2017/</a>.</p>
<p>Day 11 - Custom video player. Here is MDN manual on media element control - <a class="reference external" href="https://developer.mozilla.org/en/docs/Web/API/HTMLMediaElement">https://developer.mozilla.org/en/docs/Web/API/HTMLMediaElement</a>. And here is a walkthrough on building custom player - <a class="reference external" href="https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/cross_browser_video_player">https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/cross_browser_video_player</a>.</p>
<p>Done. What were interesting:</p>
<ul class="simple">
<li>to set progress bar to position relative to movie position I used <code>setInterval</code> with percentage number rounded with custom <code>round</code> function which supports arbitrary precision.</li>
<li>to make progress bar controllable (it's a simple colored <code>div</code> with flexible width with another <code>div</code> as a wrapper) I had to find position of the mouse relative to element. Here is example - <a class="reference external" href="https://stackoverflow.com/a/10109204">https://stackoverflow.com/a/10109204</a> - how to get it.</li>
</ul>
<p>Used JS elements:</p>
<ul class="simple">
<li>querySelector;</li>
<li>addEventListener, removeEventListener;</li>
<li>setInterval, clearInterval;</li>
<li>mediaElement.play, mediaElement.pause, mediaElement.currentTime, mediaElement.duration, mediaElement.volume, mediaElement.playbackRate.</li>
</ul>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-07-2017/" class="u-url">Plan and done for June-07-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-07-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-07T16:23:31-07:00" title="2017-06-07 16:23">2017-06-07 16:23</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Dive into JS.</li>
</ol>
<p>Decided to clear the TODO list to keep focused.</p>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic">
<li>
<p class="first">Tried another approach:</p>
<ul class="simple">
<li>on any keypress on <code>input</code> element, put it into an array;</li>
<li>if <code>Shift</code> is pressed, set all elements between two last items in the array to checked state.</li>
</ul>
<p>Encountered weird misunderstanding - I push elements with each keypress but when I want to check if an element in the array in some cases it says - NO, there is no such element. And when I log the array, I can easily spot it. WTFj</p>
<p>The reason of weirdness was simple - name for array in JS is just a pointer. I added elements to an array inside the loop. I've checked the last two array's elements on equality to my loop variable. And yes, I've just pushed array's elements out of the search scope. Moved out array initialization out of the search loop and made it immutable in some way - no addition to it at all.</p>
<p>Done.</p>
<p>Learnt how to use <code>console.group()</code> to make logs grouping in Chrome console. Learnt it from the Dat 9.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-06-2017/" class="u-url">Plan and done for June-06-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-06-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-06T16:43:31-07:00" title="2017-06-06 16:43">2017-06-06 16:43</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">Day 10 of JS30 (day 9 was about web dev panel utilization, without any assignment). Build a checkbox's list with ability to select the range of items with <code>Shift</code> pressed. My plan:</p>
<ul class="simple">
<li>iterate through the list of checkboxes (divs in this case);</li>
<li>find first checked <code>input</code> element;</li>
<li>set flag and start to put this and all following <code>input</code> elements into array;</li>
<li>if next checked found, release flag and finish iteration;</li>
<li>if flag released, <code>Shift</code> pressed, and array of elements is not empty - set <code>checked</code> property to <code>true</code> for all of them.</li>
</ul>
<p>It would work for a list of unchecked items, but if I already have checked items the approack will fail. Try something new.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-05-2017/" class="u-url">Plan and done for June-05-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-05-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-05T05:33:31-07:00" title="2017-06-05 05:33">2017-06-05 05:33</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">Still on the day 8 of JS30 (<a class="reference external" href="https://javascript30.com">https://javascript30.com</a>) - fighting with canvas drawing. I want to implement smooth width change dependant on a mouse speed. Tried to bind it directly to the speed - it works but it's far from expected smoothness.</p>
<p>Here is a snippet from MDN (<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round</a>) to make round in JS behave like in other languages - with precision:</p>
<pre class="code javascript"><a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-1"></a><span class="kd">var</span> <span class="nx">myNamespace</span> <span class="o">=</span> <span class="p">{};</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-2"></a>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-3"></a><span class="nx">myNamespace</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">precision</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-4"></a>    <span class="kd">var</span> <span class="nx">factor</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">precision</span><span class="p">);</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-5"></a>    <span class="kd">var</span> <span class="nx">tempNumber</span> <span class="o">=</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">factor</span><span class="p">;</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-6"></a>    <span class="kd">var</span> <span class="nx">roundedTempNumber</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">tempNumber</span><span class="p">);</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-7"></a>    <span class="k">return</span> <span class="nx">roundedTempNumber</span> <span class="o">/</span> <span class="nx">factor</span><span class="p">;</span>
<a name="rest_code_a1bc42b4ada24c9eb76e872d91daafe6-8"></a><span class="p">};</span>
</pre>
<p>Want to try to calculate a mouse acceleration and bind width to it.</p>
<p>And again finally I've got something, that looks not as planned. Ok. Let's move on - perfection kills has some answers and techniques - <a class="reference external" href="http://perfectionkills.com/exploring-canvas-drawing-techniques/">http://perfectionkills.com/exploring-canvas-drawing-techniques/</a> (one is exactly about quadratic bezier curve - <a class="reference external" href="https://codepen.io/kangax/pen/zofsp">https://codepen.io/kangax/pen/zofsp</a>) and here is SO answer - <a class="reference external" href="https://stackoverflow.com/a/10661872">https://stackoverflow.com/a/10661872</a>. I've completed it to look like Wes Bos example.</p>
<p>Done:</p>
<ul class="simple">
<li>recalled some math primitives - get an angle between two vectors, get point's coordinates;</li>
<li>applied ternary operator, prototype enhencement by new functions implementation, utilizing <code>hsl()</code> command in coloring shapes, canvas drawing.</li>
</ul>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-04-2017/" class="u-url">Plan and done for June-04-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-04-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-04T05:03:31-07:00" title="2017-06-04 05:03">2017-06-04 05:03</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">To arms! Looked through the code of spline drawing example - <a class="reference external" href="http://scaledinnovation.com/analytics/splines/aboutSplines.html">http://scaledinnovation.com/analytics/splines/aboutSplines.html</a>, it's not complicated but I want to build something even simpler utilizing cubic bezier curve - only one control point for each pair of mouse movement captured points. I have to find the coordinates of that control point and my idea is:</p>
<ul class="simple">
<li>to take three points with every event;</li>
<li>to calculate distance between these three points;</li>
<li>to build auxiliary similar triangle on the base of the segment connecting first two points;</li>
<li>to calculate an angle between first and third segments - it's the same angle as in my auxiliary triangle;</li>
<li>to find coordinates of the control point.</li>
</ul>
<p>Tried different options for calculating control point coordinates (this for example - <a class="reference external" href="https://math.stackexchange.com/a/1989113">https://math.stackexchange.com/a/1989113</a>). All I've got is a wavy line with skips. Then I just decided to take every three points and to use middle point as a control point. It works but in a weird way - I've got two twisted lines.</p>
<p>Finally I've checked what Wes Bos has in the tutorial on Day 8. It's easy! Much easier than I did - just straight lines from one point to another. I overcomplicate things - when I see a task, my approach is sometimes too twisted, too overthinked. Why am I so appealed by complex answers? Have to train, to learn myself to be open to simple solutions first. For example, the task is to implement smooth width increasing/decreasing while drawing in HTML5 canvas depending on the mouse speed. My approach leads to visual steps in line width change. But what I really need is to increament value by one step at a time in a given interval. After the tutorial all is clear and the only thing left is to rebuild from scratch.</p>
<p>Get the last element of array (from SO - <a class="reference external" href="https://stackoverflow.com/a/9050353">https://stackoverflow.com/a/9050353</a>) by enhancing Array.prototype:</p>
<pre class="code javascript"><a name="rest_code_be70655aaae64725b24a640f1613214d-1"></a><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">last</span><span class="p">){</span>
<a name="rest_code_be70655aaae64725b24a640f1613214d-2"></a>  <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">last</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
<a name="rest_code_be70655aaae64725b24a640f1613214d-3"></a>      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
<a name="rest_code_be70655aaae64725b24a640f1613214d-4"></a>  <span class="p">};</span>
<a name="rest_code_be70655aaae64725b24a640f1613214d-5"></a><span class="p">};</span>
</pre>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-june-02-2017/" class="u-url">Plan and done for June-02-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-june-02-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-06-02T10:48:31-07:00" title="2017-06-02 10:48">2017-06-02 10:48</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">The next JS30 assignment is to build a free drawing tool using HTML5 canvas element. The plan is to implement:</p>
<ul class="simple">
<li>draw circle function with two supporting functions: the first should get a mouse position and the second should get a mouse velocity. The first I need to draw circle in a place where mouse is located in a moment and the second - to manage line width: the faster the mouse is moved - the thinner line is drawn;</li>
<li>spline interpolation - to make the line drawn looks more natural. Without it I have only dots with intervals which depend on a mouse velocity.</li>
</ul>
<p>Here is a manual on canvas drawing - <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_usage">https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_usage</a>. An example on mouse movement tracking - <a class="reference external" href="https://stackoverflow.com/a/7790764">https://stackoverflow.com/a/7790764</a>. It's a bit weird - uses both event driven and interval scanning, but I didn't get how the last works. How to measure velocity - <a class="reference external" href="https://stackoverflow.com/a/19794374">https://stackoverflow.com/a/19794374</a>. How to work with a bezier curve - <a class="reference external" href="http://scaledinnovation.com/analytics/splines/aboutSplines.html">http://scaledinnovation.com/analytics/splines/aboutSplines.html</a>.</p>
<p>Got stuck a little - spline code do the job, but I don't want so complex logic, I want to try to implement the drawing canvas only with cubic bezier curve, so I want to calculate control point position. I know coordinates of two other points, I can find the distance between them, I can set the distance from to the desired control point voluntary and calculate its coordinates accordingly. Here is description of the process - <a class="reference external" href="https://math.stackexchange.com/a/544025">https://math.stackexchange.com/a/544025</a>.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-may-30-2017/" class="u-url">Plan and done for May-30-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-may-30-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-05-30T12:03:30-07:00" title="2017-05-30 12:03">2017-05-30 12:03</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">Tried to implement plain text parser. I want to get JSON-like data as output. Stuck with <code>map</code> because it returns the whole object but I need only one element of it. Found the solution here - <a class="reference external" href="https://stackoverflow.com/questions/36120265/how-to-convert-text-file-to-json-in-javascript">https://stackoverflow.com/questions/36120265/how-to-convert-text-file-to-json-in-javascript</a>. KISS!</p>
<p>I had some issues with understanding how to get only part of the keys in JSON object. Tried to rebuild object using <code>map</code> and <code>forEach</code> but failed. And the funniest part was that I couldn't find the answer in Google! I know, I know - a question has and answer or at least part of it, so the question was wrong. And then I just realized that it's better to use notions of set theory as it applies to Databases. What if I would ask to fine subset of JS object such as JSON. And finally I've found the solution - <a class="reference external" href="https://stackoverflow.com/a/39333479">https://stackoverflow.com/a/39333479</a>. And the approach is very neat, not much longer or trickier then in declarative languages (SQL for example).</p>
<p>Another obstacle was how to get data from node.js fs.readFile function. It seemed unnatural not to get data in return statement, but it's just another paradigm of programming and interrelation between objects in an async world. Here is an explanation on how to do it better - <a class="reference external" href="https://stackoverflow.com/questions/10058814/get-data-from-fs-readfile">https://stackoverflow.com/questions/10058814/get-data-from-fs-readfile</a>.</p>
</li>
</ol>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/plan-and-done-for-may-29-2017/" class="u-url">Plan and done for May-29-2017</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                alstof
            </span></p>
            <p class="dateline"><a href="posts/plan-and-done-for-may-29-2017/" rel="bookmark"><time class="published dt-published" datetime="2017-05-29T05:33:29-07:00" title="2017-05-29 05:33">2017-05-29 05:33</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<ol class="arabic simple">
<li>Make menu hide only on tablet and desktop versions or add input-label to hide JS-function.</li>
<li>Fix quirks in Safari: icons have become too small, everything become a mess on a wide screen.</li>
<li>Fix a masthead height on resolution wider 640px.</li>
<li>Fix an offer body text align for the gift message - now it aligns to center on resolutions less than 570.</li>
<li>Build additional pages - hotels, impression, blog.</li>
<li>Style the form on impression page.</li>
<li>Dive into JS.</li>
<li>Implement form validation.</li>
</ol>
</div>
<div class="section" id="done">
<h2>Done</h2>
<ol class="arabic" start="7">
<li>
<p class="first">Today's JS30 challange is to build photo gallery with an animation on click:</p>
<ul class="simple">
<li>expand the clicked picture if it wasn't expanded before;</li>
<li>shrink the clicked picture if it was expanded before;</li>
<li>make a hidden text appear (or disappear as it's in the normal state).</li>
</ul>
<p>The first interesting stop on the route - how to expand the picture no matter if the mouse clicked on picture or on the text in front of it. An event listener returns different objects as a target in such case: <code>div</code> with picture or <code>p</code> for the text clicked.</p>
<p>My first thought was just to prevent events if <code>p</code> element is clicked, but it's bad UX - sometimes a user clicks the picture and it works, sometimes - it doesn't. The next thought - maybe I accidentally attach event handlers to all elements down the tree starting from my target div? I need to check if it's true, so how to get all event listeners on a page? Google says it has it right inside DevTool of Chrome - <a class="reference external" href="https://developers.google.com/web/tools/chrome-devtools/console/events">https://developers.google.com/web/tools/chrome-devtools/console/events</a>. I've checked - no way, neither Chrome nor Canary. They both have tab called Event Listeners, but there is only events of active element in the Inspector, not all of them even if I tap <code>body</code> element. I've found (<a class="reference external" href="https://gist.github.com/danburzo/9254630#gistcomment-1942033">https://gist.github.com/danburzo/9254630#gistcomment-1942033</a>) the code which shows exactly what I need:</p>
<pre class="code javascript"><a name="rest_code_5b6605d6d2534af4b960293b379d598a-1"></a><span class="kr">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">'*'</span><span class="p">)).</span><span class="nx">map</span><span class="p">(</span><span class="nx">element</span> <span class="p">=&gt;</span> <span class="p">{</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-2"></a><span class="kr">const</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="nx">getEventListeners</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-3"></a>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-4"></a><span class="k">return</span> <span class="p">{</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-5"></a>  <span class="nx">element</span><span class="o">:</span> <span class="nx">element</span><span class="p">,</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-6"></a>  <span class="nx">listeners</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">listeners</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span> <span class="p">=&gt;</span> <span class="p">{</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-7"></a>    <span class="k">return</span> <span class="p">{</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-8"></a>      <span class="nx">event</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-9"></a>      <span class="nx">listeners</span><span class="o">:</span> <span class="nx">listeners</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-10"></a>    <span class="p">};</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-11"></a>  <span class="p">})</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-12"></a><span class="p">};</span>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-13"></a>
<a name="rest_code_5b6605d6d2534af4b960293b379d598a-14"></a><span class="p">}).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="p">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
</pre>
<p>Checked it - only the divs with pictures have listeners and that's exactly what I want to get as all listeners on the page. My next step was to dive into Event capturing/bubbling threads - <a class="reference external" href="https://www.kirupa.com/html5/event_capturing_bubbling_javascript.htm">https://www.kirupa.com/html5/event_capturing_bubbling_javascript.htm</a>. But it didn't bring any useful fruits, so I've switched to another tutorial - <a class="reference external" href="https://www.kirupa.com/html5/handling_events_for_many_elements.htm">https://www.kirupa.com/html5/handling_events_for_many_elements.htm</a> and found <code>currentTarget</code> element which is exactly what I need! Here is a great visualization - <a class="reference external" href="http://joequery.me/code/event-target-vs-event-currenttarget-30-seconds/">http://joequery.me/code/event-target-vs-event-currenttarget-30-seconds/</a> which I implemented from scratch in my playground - <a class="reference external" href="https://codepen.io/alstof/full/gWNOdr/">https://codepen.io/alstof/full/gWNOdr/</a>.</p>
<p>I've implemented shrinking by reseting <code>flex</code> rule of each picture element to the default value: <code>flex: 1 1 auto</code>. And I've animated text in the same way - just reseting initial value of first and third text child elements of <code>transform: translateY(+-20vh)</code> to undefined on <code>transitionend</code> event (look here - <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Events/transitionend">https://developer.mozilla.org/en-US/docs/Web/Events/transitionend</a>, and there is no any reason to use whichTransitionEnd by David Walsh - <a class="reference external" href="https://davidwalsh.name/css-animation-callback">https://davidwalsh.name/css-animation-callback</a>, because we have full support in all modern browsers - <a class="reference external" href="http://caniuse.com/#search=transitionend">http://caniuse.com/#search=transitionend</a>).</p>
<p>Done in almost 7 hours most part of which I tried to get how events behave in browser.</p>
</li>
</ol>
<p><strong>Spontaneous</strong>. Here are tons of dev-tool screencasts - <a class="reference external" href="https://umaar.com/dev-tips/">https://umaar.com/dev-tips/</a>.</p>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-8.html" rel="prev">Новые записи</a>
            </li>
            <li class="next">
                <a href="index-6.html" rel="next">Старые записи</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:alstof@gmail.com">alstof</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-ru.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("ru");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
