<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Plan and done for January-29-2018 | Learn another day</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (ru)" href="../../rss.xml">
<link rel="canonical" href="https://al1s.github.io/ru/posts/plan-and-done-for-january-29-2018/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="alstof">
<link rel="prev" href="../plan-and-done-for-january-28-2018/" title="Plan and done for January-28-2018" type="text/html">
<link rel="next" href="../plan-and-done-for-february-05-2018/" title="Plan and done for February-05-2018" type="text/html">
<meta property="og:site_name" content="Learn another day">
<meta property="og:title" content="Plan and done for January-29-2018">
<meta property="og:url" content="https://al1s.github.io/ru/posts/plan-and-done-for-january-29-2018/">
<meta property="og:description" content="What will I learn today?
FreeCodeCamp projects: Weather - fix error with unreacheble host for ip resolution; Pomodoro - start coding.


Done
While I was editing my application to the LEAP project I fo">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-01-29T05:03:31-07:00">
<meta property="article:tag" content="freeCodeCamp">
<meta property="article:tag" content="javascript">
<link rel="alternate" hreflang="en" href="../../../posts/plan-and-done-for-january-29-2018/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Перейти к главному содержимому</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Включить навигацию</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://al1s.github.io/ru/">

                <span id="blog-title">Learn another day</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" role="navigation" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../archive.html">Архив</a>
                </li>
<li>
<a href="../../categories/">Тэги</a>
                </li>
<li>
<a href="../../rss.xml">RSS лента</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
            </li>
<li><a href="https://al1s.github.io/" rel="alternate" hreflang="en">English</a></li>

                
                    
    <li>
    <a href="index.rst" id="sourcelink">Источник</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Plan and done for January-29-2018</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    alstof
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-01-29T05:03:31-07:00" itemprop="datePublished" title="2018-01-29 05:03">2018-01-29 05:03</time></a></p>
            
        <p class="sourceline"><a href="index.rst" class="sourcelink">Источник</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="section" id="what-will-i-learn-today">
<h2>What will I learn today?</h2>
<p>FreeCodeCamp projects: Weather - fix error with unreacheble host for ip resolution; Pomodoro - start coding.</p>
</div>
<div class="section" id="done">
<h2>Done</h2>
<p>While I was editing my application to the LEAP project I found that WeatherNow app stoped working on my laptop. After light research (developer tools -&gt; console and network tabs) I found the reason. The resource I've used for retrieving geolocation data based on my IP-address started responding with error message.</p>
<p>The first impulse was to replace current resource with another one. I checked for available resources and found a bunch here - <a class="reference external" href="https://stackoverflow.com/a/35123097/2255031">https://stackoverflow.com/a/35123097/2255031</a>. I payed attention to the list of resources which were available before but are down now. The most optimal and natural way is to add many resources to the app and then just request location from all of them and work with the first available. But how to get data from first successful promise resolved if we have multiple resources? Here is elegant solution from SO - <a class="reference external" href="https://stackoverflow.com/a/37235274/2255031">https://stackoverflow.com/a/37235274/2255031</a>:</p>
<blockquote>
<pre class="code javascript"><a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-1"></a><span class="kd">function</span> <span class="nx">oneSuccess</span><span class="p">(</span><span class="nx">promises</span><span class="p">){</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-2"></a>  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-3"></a>    <span class="c1">// If a request fails, count that as a resolution so it will keep</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-4"></a>    <span class="c1">// waiting for other possible successes. If a request succeeds,</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-5"></a>    <span class="c1">// treat it as a rejection so Promise.all immediately bails out.</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-6"></a>    <span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-7"></a>      <span class="nx">val</span> <span class="p">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">val</span><span class="p">),</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-8"></a>      <span class="nx">err</span> <span class="p">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-9"></a>    <span class="p">);</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-10"></a>  <span class="p">)).</span><span class="nx">then</span><span class="p">(</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-11"></a>    <span class="c1">// If '.all' resolved, we've just got an array of errors.</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-12"></a>    <span class="nx">errors</span> <span class="p">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">errors</span><span class="p">),</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-13"></a>    <span class="c1">// If '.all' rejected, we've got the result we wanted.</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-14"></a>    <span class="nx">val</span> <span class="p">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-15"></a>  <span class="p">);</span>
<a name="rest_code_e409f9ccc5f74d8c82bb62335cedb442-16"></a><span class="p">}</span>
</pre>
</blockquote>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/freecodecamp/" rel="tag">freeCodeCamp</a></li>
            <li><a class="tag p-category" href="../../categories/javascript/" rel="tag">javascript</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../plan-and-done-for-january-28-2018/" rel="prev" title="Plan and done for January-28-2018">Предыдущая запись</a>
            </li>
            <li class="next">
                <a href="../plan-and-done-for-february-05-2018/" rel="next" title="Plan and done for February-05-2018">Следующая запись</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:alstof@gmail.com">alstof</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../../assets/js/all-nocdn.js"></script><script src="../../../assets/js/colorbox-i18n/jquery.colorbox-ru.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("ru");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
