<div class="section" id="what-will-i-learn-today">
<h1>What will I learn today?</h1>
<p>FreeCodeCamp project: Calculator.</p>
</div>
<div class="section" id="done">
<h1>Done</h1>
<ol class="arabic">
<li><p class="first">To invoke numeric keyboard on mobile we need:</p>
<pre class="literal-block">
&lt;input type=&quot;tel&quot; /&gt;
</pre>
</li>
</ol>
<p>And <code>type=&quot;number&quot;</code> gives numeric keyboard too, but without symbols for arithmetic operations.</p>
<ol class="arabic" start="2">
<li><p class="first">Tried to implement insertion of digits into <code>&lt;input&gt;</code> with <code>execCommand('insertText', ...)</code> but it seems doesn't work in FF (v57.0.4). Found old working code on SO - <a class="reference external" href="https://stackoverflow.com/a/1064139">https://stackoverflow.com/a/1064139</a>. It has separate routes for old IE &lt; 9.0 and modern browsers, and the way to put elements in text field is to manually cut and then concatenate text in the field. Had some troubles with inability to put cursor at the end of the whole text after insertion but found it was due sending number primitive into the function instead of string.</p>
</li>
<li><p class="first">To turn off virtual keyboard on mobile we may use HTML5 <code>readonly</code> property for <code>input</code> - <a class="reference external" href="https://codepen.io/agorilla/pen/FJIic">https://codepen.io/agorilla/pen/FJIic</a>. But it makes impossible to control calculator using real keyboard. How to detect activation of the <code>input</code> field by user? By intercepting <cite>click</cite> mouse event. And to route <code>click</code> and <code>touchend</code> events differently inside a handler.</p>
</li>
<li><p class="first">How to set one handler for multiple events? <code>['click', 'touchend'].forEach(e =&gt; document.addEventListener(e, handlerFunc);</code>.</p>
</li>
<li><p class="first">Add vibration for pressing virtual keys on mobile:</p>
<pre class="code javascript"><a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-1"></a><span class="kd">function</span> <span class="nx">vibrateOnTouch</span><span class="p">()</span> <span class="p">{</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-2"></a>  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;vibrate&#39;</span> <span class="k">in</span> <span class="nx">navigator</span><span class="p">)</span> <span class="p">{</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-3"></a>    <span class="nx">navigator</span><span class="p">.</span><span class="nx">vibrate</span> <span class="o">=</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-4"></a>      <span class="nx">navigator</span><span class="p">.</span><span class="nx">vibrate</span> <span class="o">||</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-5"></a>      <span class="nx">navigator</span><span class="p">.</span><span class="nx">webkitVibrate</span> <span class="o">||</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-6"></a>      <span class="nx">navigator</span><span class="p">.</span><span class="nx">mozVibrate</span> <span class="o">||</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-7"></a>      <span class="nx">navigator</span><span class="p">.</span><span class="nx">msVibrate</span><span class="p">;</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-8"></a>    <span class="nx">navigator</span><span class="p">.</span><span class="nx">vibrate</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-9"></a>  <span class="p">}</span>
<a name="rest_code_79cb7cd1753f4753a5cfb455c2ea97fc-10"></a><span class="p">}</span>
</pre></li>
<li><p class="first">I applied Kyle Simpson's OLOO pattern by separating data processing and UI into different objects and then creating and invoking application as a combination of those two. Feels clearer than mashup of both into one peace of code.</p>
</li>
<li><p class="first">As a start point for UI I've choosen keybord JQuery plugin - <a class="reference external" href="https://github.com/Mottie/Keyboard/blob/master/js/jquery.keyboard.js">https://github.com/Mottie/Keyboard/blob/master/js/jquery.keyboard.js</a>.</p>
</li>
<li><p class="first">Almost perfection - <a class="reference external" href="https://web2.0calc.com/">https://web2.0calc.com/</a></p>
</li>
</ol>
</div>
