"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[915],{3186(e,t,r){r.d(t,{T:()=>u});var a=r(8510),n=r(346),i=r(3216),o=r(5043);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(this,arguments)}var s=["className","rows"],u=(0,n.Rf)(function(e,t){var r=(0,n.Vl)("Textarea",e),u=(0,n.MN)(e),d=u.className,c=u.rows,h=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(u,s),v=(0,a.tJ)(h),f=c?(0,i.cJ)(r,["h","minH","height","minHeight"]):r;return o.createElement(n.Bv.textarea,l({ref:t,rows:c},v,{className:(0,i.cx)("chakra-textarea",d),__css:f}))});i.gt&&(u.displayName="Textarea")},4746(e,t,r){r.d(t,{A:()=>u});var a=r(9379),n=r(5043),i=r(7152),o=r(6451),l=r(1806);const s=e=>({key:"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),userKey:e,timeCreated:Date.now()}),u=()=>{const{currentUser:e,logout:t,updateUser:r}=(0,i.A)(),[u,d]=(0,n.useState)(!1),c=()=>{if(!e)throw t(),Error("Not signed in");return e},h=e=>(0,l.wF)().filter(t=>t.userKey===e),v=(e,t)=>{const r=(0,l.wF)().filter(t=>t.userKey!==e);(0,l.FW)([...r,...t])},f=e=>{r(e)},m=async e=>{if(u)throw Error("Already submitting");d(!0);const t=e();return d(!1),t};return{deleteThoughtRecord:async e=>m(()=>{const t=c(),r=h(t.username).filter(t=>t.key!==e);v(t.username,r);const n=(0,a.A)((0,a.A)({},t),{},{thoughtRecords:t.thoughtRecords.filter(t=>t!==e),activeThoughtRecord:t.activeThoughtRecord===e?null:t.activeThoughtRecord});return f(n),e}),getAllThoughtRecords:async()=>m(()=>{const e=c();return h(e.username)}),updateThoughtRecord:async(e,t,r)=>m(()=>{const n=c(),i=h(n.username),o=i.findIndex(e=>e.key===t);if(o<0)throw Error("Record not found");const l=(0,a.A)((0,a.A)({},i[o]),{},{[r]:e}),s=[...i];return s[o]=l,v(n.username,s),l}),getActiveThoughtRecord:async()=>m(()=>{const e=c(),t=h(e.username),r=e.activeThoughtRecord?t.find(t=>t.key===e.activeThoughtRecord):void 0;if(r&&(0,o.f4)(r))return r;const n=s(e.username);return v(e.username,[...t,n]),f((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:n.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],n.key]))})),n}),getNewThoughtRecord:async()=>m(()=>{const e=c(),t=h(e.username),r=s(e.username);return v(e.username,[...t,r]),f((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:r.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],r.key]))})),r}),isSubmitting:u,saveThoughtRecord:async()=>m(()=>{const e=c(),t=(0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:null});return f(t),t}),editThoughtRecord:async e=>m(()=>{const t=c(),r=h(t.username).find(t=>t.key===e);if(!r)throw Error("Invalid return");return f((0,a.A)((0,a.A)({},t),{},{activeThoughtRecord:r.key})),r})}}},6451(e,t,r){r.d(t,{J6:()=>n,L0:()=>o,b1:()=>i,f4:()=>l,fK:()=>a});const a=(e,t)=>e in t,n=e=>i.includes(e),i=["/emotion","/situationquestion","/mood","/thoughts","/evidencefor","/evidenceagainst","/alternativethought","/rerateemotion","/submit"],o={"/emotion":{label:"How do you feel?",type:"Emotion"},"/situationquestion":{label:"What is the Situation?",type:"Text"},"/mood":{label:"Add any emotions you felt and rate them",type:"Mood"},"/thoughts":{label:"List any thoughts and rate your Belief",type:"Thoughts"},"/evidencefor":{label:"What is the Evidence for",type:"Text"},"/evidenceagainst":{label:"What is the Evidence Against",type:"Text"},"/alternativethought":{label:"",type:"Text"},"/rerateemotion":{label:"How do you feel?",type:"Emotion"},"/submit":{label:"something",type:"Submit"}},l=e=>!!e&&"timeCreated"in e},7748(e,t,r){r.d(t,{A:()=>u});var a=r(9379),n=r(7039),i=r(5043),o=r(835),l=r(6451),s=r(4746);const u=()=>{const e=(0,n.dj)(),t=(0,o.Zp)(),{pathname:r,state:u}=(0,o.zy)(),[d,c]=(0,i.useState)(),[h,v]=(0,i.useState)(null),{updateThoughtRecord:f,getActiveThoughtRecord:m,isSubmitting:g,saveThoughtRecord:y}=(0,s.A)();(0,i.useEffect)(()=>{if(!h&&(0,l.J6)(r)&&d){const e=((e,t)=>{for(let r of l.b1){let a=r.slice(1);if(r===e)return r;if((0,l.fK)(a,t)&&null===t[a])return r}return e})(r,d);e!==r?t(e):v(!0)}},[h,t,r,d]),(0,i.useEffect)(()=>{d||(async()=>{d||((0,l.f4)(u)?c(u):c(await m()))})()},[]);let b="",p="";return(0,l.J6)(r)&&(b=l.L0[r].label,p=r.slice(1)),{label:b,onSubmit:async n=>{if((0,l.J6)(r))if("/submit"===r)try{await y(),t("/thoughtrecords")}catch(i){i instanceof Error&&e({status:"error",description:"problem submitting"})}else{const i=r.slice(1),s=(0,l.f4)(d)?d.key:"",u=l.b1.indexOf(r)+1;try{const e=await f(n,s,i);t(l.b1[u],{state:(0,a.A)({},e)})}catch(o){e({status:"error",description:"problem with update"})}}},isSubmitting:g,currentQuestion:p,thoughtRecord:d,isValidQuestion:h}}},8510(e,t,r){r.d(t,{MJ:()=>g,Wt:()=>x,lR:()=>E,tJ:()=>R});var a=r(9754),n=r(346),i=r(3216),o=r(636),l=r(5043),s=r(3458);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}var c=["id","isRequired","isInvalid","isDisabled","isReadOnly"],h=["getRootProps","htmlProps"],v=(0,o.q6)({strict:!1,name:"FormControlContext"}),f=v[0],m=v[1];var g=(0,n.Rf)(function(e,t){var r=(0,n.o5)("Form",e),s=function(e){var t=e.id,r=e.isRequired,n=e.isInvalid,s=e.isDisabled,h=e.isReadOnly,v=d(e,c),f=(0,a.Bi)(),m=t||"field-"+f,g=m+"-label",y=m+"-feedback",b=m+"-helptext",p=l.useState(!1),R=p[0],x=p[1],T=l.useState(!1),k=T[0],E=T[1],I=(0,a.Cg)(),A=I[0],N=I[1],q=l.useCallback(function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),u({id:b},e,{ref:(0,o.Px)(t,function(e){e&&E(!0)})})},[b]),_=l.useCallback(function(e,t){var r,a;return void 0===e&&(e={}),void 0===t&&(t=null),u({},e,{ref:t,"data-focus":(0,i.sE)(A),"data-disabled":(0,i.sE)(s),"data-invalid":(0,i.sE)(n),"data-readonly":(0,i.sE)(h),id:null!=(r=e.id)?r:g,htmlFor:null!=(a=e.htmlFor)?a:m})},[m,s,A,n,h,g]),w=l.useCallback(function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),u({id:y},e,{ref:(0,o.Px)(t,function(e){e&&x(!0)}),"aria-live":"polite"})},[y]),F=l.useCallback(function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),u({},e,v,{ref:t,role:"group"})},[v]),O=l.useCallback(function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),u({},e,{ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"})},[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!h,isDisabled:!!s,isFocused:!!A,onFocus:N.on,onBlur:N.off,hasFeedbackText:R,setHasFeedbackText:x,hasHelpText:k,setHasHelpText:E,id:m,labelId:g,feedbackId:y,helpTextId:b,htmlProps:v,getHelpTextProps:q,getErrorMessageProps:w,getRootProps:F,getLabelProps:_,getRequiredIndicatorProps:O}}((0,n.MN)(e)),v=s.getRootProps;s.htmlProps;var m=d(s,h),g=(0,i.cx)("chakra-form-control",e.className);return l.createElement(f,{value:m},l.createElement(n.W$,{value:r},l.createElement(n.Bv.div,u({},v({},t),{className:g,__css:r.container}))))});i.gt&&(g.displayName="FormControl");var y=(0,n.Rf)(function(e,t){var r=m(),a=(0,n.IS)(),o=(0,i.cx)("chakra-form__helper-text",e.className);return l.createElement(n.Bv.div,u({},null==r?void 0:r.getHelpTextProps(e,t),{__css:a.helperText,className:o}))});i.gt&&(y.displayName="FormHelperText");var b=["isDisabled","isInvalid","isReadOnly","isRequired"],p=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function R(e){var t=function(e){var t,r,a,n=m(),o=e.id,l=e.disabled,s=e.readOnly,c=e.required,h=e.isRequired,v=e.isInvalid,f=e.isReadOnly,g=e.isDisabled,y=e.onFocus,b=e.onBlur,R=d(e,p),x=e["aria-describedby"]?[e["aria-describedby"]]:[];null!=n&&n.hasFeedbackText&&null!=n&&n.isInvalid&&x.push(n.feedbackId);null!=n&&n.hasHelpText&&x.push(n.helpTextId);return u({},R,{"aria-describedby":x.join(" ")||void 0,id:null!=o?o:null==n?void 0:n.id,isDisabled:null!=(t=null!=l?l:g)?t:null==n?void 0:n.isDisabled,isReadOnly:null!=(r=null!=s?s:f)?r:null==n?void 0:n.isReadOnly,isRequired:null!=(a=null!=c?c:h)?a:null==n?void 0:n.isRequired,isInvalid:null!=v?v:null==n?void 0:n.isInvalid,onFocus:(0,i.Hj)(null==n?void 0:n.onFocus,y),onBlur:(0,i.Hj)(null==n?void 0:n.onBlur,b)})}(e),r=t.isDisabled,a=t.isInvalid,n=t.isReadOnly,o=t.isRequired;return u({},d(t,b),{disabled:r,readOnly:n,required:o,"aria-invalid":(0,i.rq)(a),"aria-required":(0,i.rq)(o),"aria-readonly":(0,i.rq)(n)})}var x=(0,n.Rf)(function(e,t){var r=(0,n.o5)("FormError",e),a=(0,n.MN)(e),o=m();return null!=o&&o.isInvalid?l.createElement(n.W$,{value:r},l.createElement(n.Bv.div,u({},null==o?void 0:o.getErrorMessageProps(a,t),{className:(0,i.cx)("chakra-form__error-message",e.className),__css:u({display:"flex",alignItems:"center"},r.text)}))):null});i.gt&&(x.displayName="FormErrorMessage");var T=(0,n.Rf)(function(e,t){var r=(0,n.IS)(),a=m();if(null==a||!a.isInvalid)return null;var o=(0,i.cx)("chakra-form__error-icon",e.className);return l.createElement(s.Ay,u({ref:t,"aria-hidden":!0},e,{__css:r.icon,className:o}),l.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"}))});i.gt&&(T.displayName="FormErrorIcon");var k=["className","children","requiredIndicator","optionalIndicator"],E=(0,n.Rf)(function(e,t){var r,a=(0,n.Vl)("FormLabel",e),o=(0,n.MN)(e);o.className;var s=o.children,c=o.requiredIndicator,h=void 0===c?l.createElement(I,null):c,v=o.optionalIndicator,f=void 0===v?null:v,g=d(o,k),y=m(),b=null!=(r=null==y?void 0:y.getLabelProps(g,t))?r:u({ref:t},g);return l.createElement(n.Bv.label,u({},b,{className:(0,i.cx)("chakra-form__label",o.className),__css:u({display:"block",textAlign:"start"},a)}),s,null!=y&&y.isRequired?h:f)});i.gt&&(E.displayName="FormLabel");var I=(0,n.Rf)(function(e,t){var r=m(),a=(0,n.IS)();if(null==r||!r.isRequired)return null;var o=(0,i.cx)("chakra-form__required-indicator",e.className);return l.createElement(n.Bv.span,u({},null==r?void 0:r.getRequiredIndicatorProps(e,t),{__css:a.requiredIndicator,className:o}))});i.gt&&(I.displayName="RequiredIndicator")}}]);
//# sourceMappingURL=915.77288b1b.chunk.js.map