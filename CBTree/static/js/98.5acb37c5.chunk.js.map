{"version":3,"file":"static/js/98.5acb37c5.chunk.js","mappings":"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","sources":["Hooks/useThoughtRecordApi.tsx","types.ts","Components/Profile.tsx"],"sourcesContent":["import { useState } from 'react'\nimport useAuth from './useAuth'\nimport { FormValues, ThoughtRecord, isThoughtRecord, User } from '../types'\nimport {\n\tloadThoughtRecords,\n\tsaveThoughtRecords,\n} from '../Utils/localStorage'\n\n/* returns a function that takes in the current path and active thought record \n to update and a piece of state that shows if the data is currently being fetched */\n\ntype FetchThoughtRecord = () => Promise<ThoughtRecord>\n\ninterface useThoughtRecordReturn {\n\tdeleteThoughtRecord: (thoughtRecord: string) => Promise<string>\n\tgetActiveThoughtRecord: FetchThoughtRecord\n\tgetNewThoughtRecord: FetchThoughtRecord\n\tgetAllThoughtRecords: () => Promise<ThoughtRecord[]>\n\tupdateThoughtRecord: (\n\t\tdata: FormValues,\n\t\tactiveThoughtRecord: string,\n\t\tupdateKey: string,\n\t) => Promise<ThoughtRecord>\n\tsaveThoughtRecord: () => Promise<User>\n\teditThoughtRecord: (thoughtRecordId: string) => Promise<ThoughtRecord>\n\tisSubmitting: boolean\n}\n\nconst createThoughtRecord = (username: string): ThoughtRecord => {\n\tconst recordKey = `${Date.now()}-${Math.random().toString(16).slice(2)}`\n\treturn {\n\t\tkey: recordKey,\n\t\tuserKey: username,\n\t\ttimeCreated: Date.now(),\n\t}\n}\n\nconst useThoughtRecordApi = (): useThoughtRecordReturn => {\n\tconst { currentUser, logout, updateUser } = useAuth()\n\tconst [isSubmitting, setIsSubmitting] = useState(false)\n\n\tconst requireUser = () => {\n\t\tif (!currentUser) {\n\t\t\tlogout()\n\t\t\tthrow Error('Not signed in')\n\t\t}\n\t\treturn currentUser\n\t}\n\n\tconst getUserRecords = (username: string) =>\n\t\tloadThoughtRecords().filter((record) => record.userKey === username)\n\n\tconst saveUserRecords = (username: string, records: ThoughtRecord[]) => {\n\t\tconst otherRecords = loadThoughtRecords().filter(\n\t\t\t(record) => record.userKey !== username,\n\t\t)\n\t\tsaveThoughtRecords([...otherRecords, ...records])\n\t}\n\n\tconst updateUserState = (user: User) => {\n\t\tupdateUser(user)\n\t}\n\n\tconst handleAction = async <T,>(action: () => T): Promise<T> => {\n\t\tif (isSubmitting) {\n\t\t\tthrow Error('Already submitting')\n\t\t}\n\t\tsetIsSubmitting(true)\n\t\tconst result = action()\n\t\tsetIsSubmitting(false)\n\t\treturn result\n\t}\n\n\tconst getActiveThoughtRecord = async (): Promise<ThoughtRecord> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst records = getUserRecords(user.username)\n\t\t\tconst activeRecord = user.activeThoughtRecord\n\t\t\t\t? records.find((record) => record.key === user.activeThoughtRecord)\n\t\t\t\t: undefined\n\t\t\tif (activeRecord && isThoughtRecord(activeRecord)) {\n\t\t\t\treturn activeRecord\n\t\t\t}\n\t\t\tconst newRecord = createThoughtRecord(user.username)\n\t\t\tsaveUserRecords(user.username, [...records, newRecord])\n\t\t\tupdateUserState({\n\t\t\t\t...user,\n\t\t\t\tactiveThoughtRecord: newRecord.key,\n\t\t\t\tthoughtRecords: Array.from(\n\t\t\t\t\tnew Set([...(user.thoughtRecords || []), newRecord.key]),\n\t\t\t\t),\n\t\t\t})\n\t\t\treturn newRecord\n\t\t})\n\n\tconst getNewThoughtRecord = async (): Promise<ThoughtRecord> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst records = getUserRecords(user.username)\n\t\t\tconst newRecord = createThoughtRecord(user.username)\n\t\t\tsaveUserRecords(user.username, [...records, newRecord])\n\t\t\tupdateUserState({\n\t\t\t\t...user,\n\t\t\t\tactiveThoughtRecord: newRecord.key,\n\t\t\t\tthoughtRecords: Array.from(\n\t\t\t\t\tnew Set([...(user.thoughtRecords || []), newRecord.key]),\n\t\t\t\t),\n\t\t\t})\n\t\t\treturn newRecord\n\t\t})\n\n\tconst getAllThoughtRecords = async (): Promise<ThoughtRecord[]> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\treturn getUserRecords(user.username)\n\t\t})\n\n\tconst saveThoughtRecord = async (): Promise<User> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst updatedUser = {\n\t\t\t\t...user,\n\t\t\t\tactiveThoughtRecord: null,\n\t\t\t}\n\t\t\tupdateUserState(updatedUser)\n\t\t\treturn updatedUser\n\t\t})\n\n\tconst deleteThoughtRecord = async (thoughtRecord: string): Promise<string> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst records = getUserRecords(user.username).filter(\n\t\t\t\t(record) => record.key !== thoughtRecord,\n\t\t\t)\n\t\t\tsaveUserRecords(user.username, records)\n\t\t\tconst updatedUser = {\n\t\t\t\t...user,\n\t\t\t\tthoughtRecords: user.thoughtRecords.filter(\n\t\t\t\t\t(record) => record !== thoughtRecord,\n\t\t\t\t),\n\t\t\t\tactiveThoughtRecord:\n\t\t\t\t\tuser.activeThoughtRecord === thoughtRecord\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: user.activeThoughtRecord,\n\t\t\t}\n\t\t\tupdateUserState(updatedUser)\n\t\t\treturn thoughtRecord\n\t\t})\n\n\tconst editThoughtRecord = async (thoughtRecordId: string) =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst records = getUserRecords(user.username)\n\t\t\tconst record = records.find((entry) => entry.key === thoughtRecordId)\n\t\t\tif (!record) {\n\t\t\t\tthrow Error('Invalid return')\n\t\t\t}\n\t\t\tupdateUserState({\n\t\t\t\t...user,\n\t\t\t\tactiveThoughtRecord: record.key,\n\t\t\t})\n\t\t\treturn record\n\t\t})\n\n\tconst updateThoughtRecord = async (\n\t\tdata: FormValues,\n\t\tactiveThoughtRecord: string,\n\t\tupdateKey: string,\n\t): Promise<ThoughtRecord> =>\n\t\thandleAction(() => {\n\t\t\tconst user = requireUser()\n\t\t\tconst records = getUserRecords(user.username)\n\t\t\tconst index = records.findIndex(\n\t\t\t\t(record) => record.key === activeThoughtRecord,\n\t\t\t)\n\t\t\tif (index < 0) {\n\t\t\t\tthrow Error('Record not found')\n\t\t\t}\n\t\t\tconst updatedRecord = {\n\t\t\t\t...records[index],\n\t\t\t\t[updateKey]: data,\n\t\t\t}\n\t\t\tconst updatedRecords = [...records]\n\t\t\tupdatedRecords[index] = updatedRecord\n\t\t\tsaveUserRecords(user.username, updatedRecords)\n\t\t\treturn updatedRecord\n\t\t})\n\n\treturn {\n\t\tdeleteThoughtRecord,\n\t\tgetAllThoughtRecords,\n\t\tupdateThoughtRecord,\n\t\tgetActiveThoughtRecord,\n\t\tgetNewThoughtRecord,\n\t\tisSubmitting,\n\t\tsaveThoughtRecord,\n\t\teditThoughtRecord,\n\t}\n}\n\nexport default useThoughtRecordApi\n","export type Mood = {\n  mood: string,\n  moodRating: number\n}\nexport const isKeyOfThoughtRecord =\n  (question: string, thoughtRecord: ThoughtRecord): question is keyof ThoughtRecord => {\n    return question in thoughtRecord\n  }\nexport const isQuestion = (pathname: any): pathname is QuestionType => {\n  return (question.includes(pathname))\n}\n\nexport type FormValues = String | Mood[] | Thoughts | ThoughtRecord\n\nexport const question = [\n  \"/emotion\",\n  \"/situationquestion\",\n  \"/mood\",\n  \"/thoughts\",\n  \"/evidencefor\",\n  \"/evidenceagainst\",\n  \"/alternativethought\",\n  \"/rerateemotion\",\n  \"/submit\"\n] as const\n\nexport type QuestionType = typeof question[number]\n\nexport const thoughtRecordData = {\n  \"/emotion\": { label: \"How do you feel?\", type: \"Emotion\" },\n  \"/situationquestion\": { label: \"What is the Situation?\", type: \"Text\" },\n  \"/mood\": { label: \"Add any emotions you felt and rate them\", type: \"Mood\" },\n  \"/thoughts\": { label: \"List any thoughts and rate your Belief\", type: \"Thoughts\" },\n  \"/evidencefor\": { label: \"What is the Evidence for\", type: \"Text\" },\n  \"/evidenceagainst\": { label: \"What is the Evidence Against\", type: \"Text\" },\n  \"/alternativethought\": { label: \"\", type: \"Text\" },\n  \"/rerateemotion\": { label: \"How do you feel?\", type: \"Emotion\" },\n  \"/submit\": { label: \"something\", type: \"Submit\" }\n}\n\nconst thoughtRecordKeys =\n  [\n    \"key\",\n    \"emotion\",\n    \"userKey\",\n    \"timeCreated\",\n    \"mood\",\n    \"thoughts\",\n    \"answer\",\n    \"rerateemotion\",\n    \"situationquestion\",\n    \"evidencefor\",\n    \"evidenceagainst\",\n    \"alternativethought\"\n  ]\n\n\nexport interface Thoughts {\n  thoughts: Mood[],\n  hotThought: string\n}\n\nexport const isThoughtRecord = (record: any): record is ThoughtRecord => {\n  if (record) {\n    return \"timeCreated\" in record\n  }\n  return false\n}\nexport const isFullThoughtRecord = (record: any): record is FullThoughtRecord => {\n  if (!record) {\n    return false\n  }\n  const keys = Object.keys(record)\n  for (let key of keys) {\n    if (!thoughtRecordKeys.includes(key)) {\n      return false\n    }\n  }\n  return true\n}\n\nexport interface User {\n  activeThoughtRecord: string | null\n  thoughtRecords: string[]\n  username: string\n  firstName?: string\n  lastName?: string\n}\nexport type FullThoughtRecord = Required<ThoughtRecord>\n\nexport interface ThoughtRecord {\n  userKey: string\n  key: string\n  timeCreated: number,\n  emotion?: string,\n  mood?: Mood[],\n  thoughts?: Thoughts\n  answer?: string,\n  rerateemotion?: string,\n  situationquestion?: string,\n  evidencefor?: string,\n  evidenceagainst?: string\n  alternativethought?: Mood[]\n}  \n","import {\n\tButton,\n\tButtonGroup,\n\tHeading,\n\tVStack,\n\tText,\n\tLink,\n\tCenter,\n\tDivider,\n\tuseToast,\n} from '@chakra-ui/react'\nimport { BsGithub } from 'react-icons/bs'\nimport { useNavigate, Link as BrowserLink } from 'react-router-dom'\nimport useAuth from '../Hooks/useAuth'\nimport useThoughtRecordApi from '../Hooks/useThoughtRecordApi'\nimport { ChangeEvent, useRef } from 'react'\nimport {\n\tgetBackupData,\n\trestoreBackupData,\n} from '../Utils/localStorage'\n\nconst Profile = () => {\n\tconst { getNewThoughtRecord, editThoughtRecord, isSubmitting } =\n\t\tuseThoughtRecordApi()\n\tconst navigate = useNavigate()\n\tconst toast = useToast()\n\tconst fileInputRef = useRef<HTMLInputElement | null>(null)\n\tconst handleEdit = async (thoughtRecordId: string) => {\n\t\tconst thoughtRecord = await editThoughtRecord(thoughtRecordId)\n\t\tnavigate('/emotion', { state: { ...thoughtRecord } })\n\t}\n\tconst handleNewThoughtRecord = async () => {\n\t\tawait getNewThoughtRecord()\n\t\tnavigate('/emotion')\n\t}\n\tconst { currentUser } = useAuth()\n\tif (!currentUser) {\n\t\tnavigate('/login')\n\t\treturn <></>\n\t}\n\n\tconst userName = currentUser.firstName || currentUser.username.split('@')[0]\n\tconst { thoughtRecords, activeThoughtRecord } = currentUser\n\n\tconst handleBackupDownload = () => {\n\t\tconst data = getBackupData()\n\t\tconst blob = new Blob([JSON.stringify(data, null, 2)], {\n\t\t\ttype: 'application/json',\n\t\t})\n\t\tconst url = URL.createObjectURL(blob)\n\t\tconst anchor = document.createElement('a')\n\t\tanchor.href = url\n\t\tanchor.download = `cbtree-backup-${Date.now()}.json`\n\t\tdocument.body.appendChild(anchor)\n\t\tanchor.click()\n\t\tanchor.remove()\n\t\tURL.revokeObjectURL(url)\n\t}\n\n\tconst handleBackupRestore = async (event: ChangeEvent<HTMLInputElement>) => {\n\t\tconst file = event.target.files?.[0]\n\t\tif (!file) {\n\t\t\treturn\n\t\t}\n\t\ttry {\n\t\t\tconst text = await file.text()\n\t\t\tconst data = JSON.parse(text)\n\t\t\trestoreBackupData(data)\n\t\t\ttoast({\n\t\t\t\tstatus: 'success',\n\t\t\t\tdescription: 'Backup restored. Reloadingâ€¦',\n\t\t\t})\n\t\t\twindow.location.reload()\n\t\t} catch (error) {\n\t\t\tif (error instanceof Error) {\n\t\t\t\ttoast({\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\tdescription: error.message || 'Unable to restore backup.',\n\t\t\t\t})\n\t\t\t}\n\t\t} finally {\n\t\t\tif (fileInputRef.current) {\n\t\t\t\tfileInputRef.current.value = ''\n\t\t\t}\n\t\t}\n\t}\n\treturn (\n\t\t<>\n\t\t\t<Center minH={'70vh'}>\n\t\t\t\t<VStack textAlign={'center'} spacing={10} mt={2}>\n\t\t\t\t\t<Heading>Welcome to CBTree {userName}</Heading>\n\n\t\t\t\t\t<Link as={BrowserLink} to={'/about'}>\n\t\t\t\t\t\t<Text color=\"whiteAlpha.800\" as=\"u\">\n\t\t\t\t\t\t\tWhat is a thought record?\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<ButtonGroup spacing={6} size={'lg'}>\n\t\t\t\t\t\t<Link as={BrowserLink} to=\"/thoughtrecords\">\n\t\t\t\t\t\t\t<Button disabled={!!thoughtRecords} isLoading={isSubmitting}>\n\t\t\t\t\t\t\t\tView\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<Button isLoading={isSubmitting} onClick={handleNewThoughtRecord}>\n\t\t\t\t\t\t\tNew\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={!activeThoughtRecord}\n\t\t\t\t\t\t\tonClick={() => handleEdit(activeThoughtRecord || '')}\n\t\t\t\t\t\t\tisLoading={isSubmitting}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<Divider borderColor=\"whiteAlpha.300\" />\n\t\t\t\t\t<VStack spacing={4}>\n\t\t\t\t\t\t<Text fontWeight=\"bold\">Backup your data</Text>\n\t\t\t\t\t\t<Button onClick={handleBackupDownload} variant=\"outline\">\n\t\t\t\t\t\t\tDownload backup\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => fileInputRef.current?.click()}\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRestore from file\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={fileInputRef}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\taccept=\"application/json\"\n\t\t\t\t\t\t\tonChange={handleBackupRestore}\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</VStack>\n\t\t\t\t\t<Text color={'white'} p={2} fontSize={14}>\n\t\t\t\t\t\tIf you have any questions or concerns Contact us at:{' '}\n\t\t\t\t\t\t<Link href={'mailto:kylehgc@gmail.com'}>\n\t\t\t\t\t\t\t<Text color={'whiteAlpha.800'} as=\"u\">\n\t\t\t\t\t\t\t\tkylehgc@gmail.com\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Link href=\"https://github.com/kylehgc/CBTree\">\n\t\t\t\t\t\t<BsGithub size={80} />\n\t\t\t\t\t</Link>\n\t\t\t\t</VStack>\n\t\t\t</Center>\n\t\t</>\n\t)\n}\n\nexport default Profile\n"],"names":["createThoughtRecord","username","key","concat","Date","now","Math","random","toString","slice","userKey","timeCreated","useThoughtRecordApi","currentUser","logout","updateUser","useAuth","isSubmitting","setIsSubmitting","useState","requireUser","Error","getUserRecords","loadThoughtRecords","filter","record","saveUserRecords","records","otherRecords","saveThoughtRecords","updateUserState","user","handleAction","async","result","action","deleteThoughtRecord","thoughtRecord","updatedUser","_objectSpread","thoughtRecords","activeThoughtRecord","getAllThoughtRecords","updateThoughtRecord","data","updateKey","index","findIndex","updatedRecord","updatedRecords","getActiveThoughtRecord","activeRecord","find","undefined","isThoughtRecord","newRecord","Array","from","Set","getNewThoughtRecord","saveThoughtRecord","editThoughtRecord","entry","thoughtRecordId","isKeyOfThoughtRecord","question","isQuestion","pathname","includes","thoughtRecordData","label","type","Profile","navigate","useNavigate","toast","useToast","fileInputRef","useRef","_jsx","_Fragment","userName","firstName","split","children","Center","minH","_jsxs","VStack","textAlign","spacing","mt","Heading","Link","as","BrowserLink","to","Text","color","ButtonGroup","size","Button","disabled","isLoading","onClick","state","handleEdit","Divider","borderColor","fontWeight","handleBackupDownload","getBackupData","blob","Blob","JSON","stringify","url","URL","createObjectURL","anchor","document","createElement","href","download","body","appendChild","click","remove","revokeObjectURL","variant","_fileInputRef$current","current","ref","accept","onChange","_event$target$files","file","event","target","files","text","parse","restoreBackupData","status","description","window","location","reload","error","message","value","style","display","p","fontSize","BsGithub"],"ignoreList":[],"sourceRoot":""}