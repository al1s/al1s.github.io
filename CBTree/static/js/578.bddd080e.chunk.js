"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[578],{578(e,t,l){l.r(t),l.d(t,{default:()=>h,isMood:()=>c});var a=l(2554),o=l(5043);const r=JSON.parse('[{"label":"Afraid","value":"Afraid"},{"label":"Aggravated","value":"Aggravated"},{"label":"Angry","value":"Angry"},{"label":"Anxious","value":"Anxious"},{"label":"Ashamed","value":"Ashamed"},{"label":"Assertive","value":"Assertive"},{"label":"Burdened","value":"Burdened"},{"label":"Brave","value":"Brave"},{"label":"Calm","value":"Calm"},{"label":"Cautious","value":"Cautious"},{"label":"Challenged","value":"Challenged"},{"label":"Cheerful","value":"Cheerful"},{"label":"Cherished","value":"Cherished"},{"label":"Comforted","value":"Comforted"},{"label":"Contented","value":"Contented"},{"label":"Creative","value":"Creative"},{"label":"Curious","value":"Curious"},{"label":"Depressed","value":"Depressed"},{"label":"Embarrassed","value":"Embarrassed"},{"label":"Energized","value":"Energized"},{"label":"Envious","value":"Envious"},{"label":"Excited","value":"Excited"},{"label":"Furious","value":"Furious"},{"label":"Guilty","value":"Guilty"},{"label":"Grumpy","value":"Grumpy"},{"label":"Happy","value":"Happy"},{"label":"Hopeful","value":"Hopeful"},{"label":"Humiliated","value":"Humiliated"},{"label":"Hurt","value":"Hurt"},{"label":"Indifferent","value":"Indifferent"},{"label":"Insecure","value":"Insecure"},{"label":"Irritated","value":"Irritated"},{"label":"Lonely","value":"Lonely"},{"label":"Loved","value":"Loved"},{"label":"Mad","value":"Mad"},{"label":"Optimistic","value":"Optimistic"},{"label":"Overwhelmed","value":"Overwhelmed"},{"label":"Panicked","value":"Panicked"},{"label":"Peaceful","value":"Peaceful"},{"label":"Positive","value":"Positive"},{"label":"Pessimistic","value":"Pessimistic"},{"label":"Prepared","value":"Prepared"},{"label":"Proud","value":"Proud"},{"label":"Ready for Change","value":"Ready for Change"},{"label":"Regretful","value":"Regretful"},{"label":"Relieved","value":"Relieved"},{"label":"Renewed","value":"Renewed"},{"label":"Sad","value":"Sad"},{"label":"Self-confident","value":"Self-confident"},{"label":"Shameful","value":"Shameful"},{"label":"Skeptical","value":"Skeptical"},{"label":"Sorrowful","value":"Sorrowful"},{"label":"Suicidal","value":"Suicidal"},{"label":"Worried","value":"Worried"}]');var n=l(7748),i=l(8426),s=l(1555),u=l(6451),d=l(579);const c=e=>!!(Array.isArray(e)&&e.length>0)&&"mood"in e[0],h=()=>{const[e,t]=(0,o.useState)([]),{label:l,onSubmit:h,thoughtRecord:m,currentQuestion:v,isSubmitting:b}=(0,n.A)();return(0,o.useEffect)(()=>{"reratemoods"===v&&null!==m&&void 0!==m&&m.mood&&t(m.mood)},[v,t,m]),(0,o.useEffect)(()=>{if(m&&(0,u.fK)(v,m)){const e=m[v];c(e)&&t(e)}},[v,m]),m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.A,{isSubmitting:b,moods:e,setMoods:t,selectOptions:r,label:l}),e.length>0?(0,d.jsx)(a.$n,{mt:8,mb:2,minH:10,w:"60%",isLoading:b,loadingText:"Submitting",onClick:()=>h(e),children:"Submit"}):null]}):(0,d.jsx)(i.A,{})}},1555(e,t,l){l.d(t,{A:()=>h});var a=l(7727),o=l(2554),r=l(8510),n=l(4450),i=l(858),s=l(5043),u=l(2645),d=l(7748),c=l(579);const h=e=>{let{isSubmitting:t,moods:l,setMoods:h,selectOptions:m,label:v}=e;const{currentQuestion:b}=(0,d.A)(),[g,f]=(0,s.useState)("");return(0,c.jsxs)(c.Fragment,{children:["reratemoods"!==b?(0,c.jsxs)(i.s1,{offsetY:0,offsetX:50,transition:{enter:{delay:.2,duration:.5},exit:{delay:.4,duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",height:"auto",width:"100%"},in:!t,children:[(0,c.jsxs)(n.az,{p:2,w:"92%",mt:6,mb:2,mx:7,children:[(0,c.jsx)(r.lR,{mb:2,color:"white",fontSize:14,children:v}),(0,c.jsx)(a.qJ,{size:"md",onChange:(e,t)=>{e&&f(e.value)},options:m})]}),(0,c.jsx)(o.$n,{alignSelf:"center",onClick:()=>{return e=g,void(!l.map(e=>e.mood).includes(e)&&e&&h([...l,{mood:e,moodRating:0}]));var e},w:"60%",minH:10,my:6,children:"Add"})]}):(0,c.jsxs)(n.DZ,{children:[" ",v," "]}),(0,c.jsx)(u.A,{moods:l,setMoods:h})]})}},2645(e,t,l){l.d(t,{A:()=>g,v:()=>m});var a=l(2554),o=l(4450),r=l(4162),n=l(9292),i=l(858),s=l(4034),u=l(5043),d=l(3399),c=l(7748),h=l(579);const m=e=>e<25?"green.400":e<50?"yellow.600":e<75?"orange.400":"red.800",v=e=>{let{deleteHandler:t,mood:l,moodRating:a,sliderChange:s}=e;const{currentQuestion:v}=(0,c.A)(),[g,f]=(0,u.useState)(!1),{foregroundColor:y}=(0,d.A)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.zW,{in:!g,transition:{enter:{duration:.5},exit:{duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",height:"auto",width:"100%"},children:(0,h.jsx)(o.az,{w:{base:"full",lg:"80%"},my:3,alignSelf:"center",children:(0,h.jsxs)(o.zt,{rounded:"2xl",mx:3,bg:y,pl:2,minH:20,pr:1,justifyContent:"center",children:[(0,h.jsxs)(o.Tk,{ml:2,spacing:2,p:1,w:"100%",children:[(0,h.jsx)(o.EY,{w:"100%",textAlign:"left",children:l}),(0,h.jsxs)(r.Ap,{colorScheme:m(a).slice(0,-4),ml:2,mr:1,mb:2,onChange:e=>s(e),value:a,children:[(0,h.jsx)(r.hB,{children:(0,h.jsx)(r.hJ,{})}),(0,h.jsx)(n.m,{hasArrow:!0,zIndex:-9999,fontSize:"sm",bg:m(a),color:"white",placement:"right",isOpen:!g,label:"".concat(a,"%"),children:(0,h.jsx)(r.OQ,{bg:"teal.400"})})]})]}),"reratemoods"!==v?(0,h.jsx)(b,{deleteHandler:()=>(e=>{f(!0),setTimeout(e,500)})(t)}):null]})})})})},b=e=>{let{deleteHandler:t}=e;return(0,h.jsx)(a.K0,{color:"black","aria-label":"Delete Mood",variant:"ghost",size:"sm",icon:(0,h.jsx)(s.US,{}),onClick:t})},g=e=>{let{moods:t,setMoods:l}=e;return(0,h.jsx)(o.ov,{flexDirection:"column",w:"100%",mt:0,mb:0,children:t.map(e=>{let{mood:a,moodRating:o}=e;return(0,h.jsx)(v,{mood:a,deleteHandler:()=>{return e=a,void l(t.filter(t=>t.mood!==e));var e},sliderChange:(r=a,e=>{l(t=>t.map(t=>t.mood===r?{mood:t.mood,moodRating:e}:t))}),moodRating:o},a);var r})})}},4746(e,t,l){l.d(t,{A:()=>u});var a=l(9379),o=l(5043),r=l(7152),n=l(6451),i=l(1806);const s=e=>({key:"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),userKey:e,timeCreated:Date.now()}),u=()=>{const{currentUser:e,logout:t,updateUser:l}=(0,r.A)(),[u,d]=(0,o.useState)(!1),c=()=>{if(!e)throw t(),Error("Not signed in");return e},h=e=>(0,i.wF)().filter(t=>t.userKey===e),m=(e,t)=>{const l=(0,i.wF)().filter(t=>t.userKey!==e);(0,i.FW)([...l,...t])},v=e=>{l(e)},b=async e=>{if(u)throw Error("Already submitting");d(!0);const t=e();return d(!1),t};return{deleteThoughtRecord:async e=>b(()=>{const t=c(),l=h(t.username).filter(t=>t.key!==e);m(t.username,l);const o=(0,a.A)((0,a.A)({},t),{},{thoughtRecords:t.thoughtRecords.filter(t=>t!==e),activeThoughtRecord:t.activeThoughtRecord===e?null:t.activeThoughtRecord});return v(o),e}),getAllThoughtRecords:async()=>b(()=>{const e=c();return h(e.username)}),updateThoughtRecord:async(e,t,l)=>b(()=>{const o=c(),r=h(o.username),n=r.findIndex(e=>e.key===t);if(n<0)throw Error("Record not found");const i=(0,a.A)((0,a.A)({},r[n]),{},{[l]:e}),s=[...r];return s[n]=i,m(o.username,s),i}),getActiveThoughtRecord:async()=>b(()=>{const e=c(),t=h(e.username),l=e.activeThoughtRecord?t.find(t=>t.key===e.activeThoughtRecord):void 0;if(l&&(0,n.f4)(l))return l;const o=s(e.username);return m(e.username,[...t,o]),v((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:o.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],o.key]))})),o}),getNewThoughtRecord:async()=>b(()=>{const e=c(),t=h(e.username),l=s(e.username);return m(e.username,[...t,l]),v((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:l.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],l.key]))})),l}),isSubmitting:u,saveThoughtRecord:async()=>b(()=>{const e=c(),t=(0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:null});return v(t),t}),editThoughtRecord:async e=>b(()=>{const t=c(),l=h(t.username).find(t=>t.key===e);if(!l)throw Error("Invalid return");return v((0,a.A)((0,a.A)({},t),{},{activeThoughtRecord:l.key})),l})}}},6451(e,t,l){l.d(t,{J6:()=>o,L0:()=>n,b1:()=>r,f4:()=>i,fK:()=>a});const a=(e,t)=>e in t,o=e=>r.includes(e),r=["/emotion","/situationquestion","/mood","/thoughts","/evidencefor","/evidenceagainst","/alternativethought","/rerateemotion","/submit"],n={"/emotion":{label:"How do you feel?",type:"Emotion"},"/situationquestion":{label:"What is the Situation?",type:"Text"},"/mood":{label:"Add any emotions you felt and rate them",type:"Mood"},"/thoughts":{label:"List any thoughts and rate your Belief",type:"Thoughts"},"/evidencefor":{label:"What is the Evidence for",type:"Text"},"/evidenceagainst":{label:"What is the Evidence Against",type:"Text"},"/alternativethought":{label:"",type:"Text"},"/rerateemotion":{label:"How do you feel?",type:"Emotion"},"/submit":{label:"something",type:"Submit"}},i=e=>!!e&&"timeCreated"in e},7748(e,t,l){l.d(t,{A:()=>u});var a=l(9379),o=l(7039),r=l(5043),n=l(835),i=l(6451),s=l(4746);const u=()=>{const e=(0,o.dj)(),t=(0,n.Zp)(),{pathname:l,state:u}=(0,n.zy)(),[d,c]=(0,r.useState)(),[h,m]=(0,r.useState)(null),{updateThoughtRecord:v,getActiveThoughtRecord:b,isSubmitting:g,saveThoughtRecord:f}=(0,s.A)();(0,r.useEffect)(()=>{if(!h&&(0,i.J6)(l)&&d){const e=((e,t)=>{for(let l of i.b1){let a=l.slice(1);if(l===e)return l;if((0,i.fK)(a,t)&&null===t[a])return l}return e})(l,d);e!==l?t(e):m(!0)}},[h,t,l,d]),(0,r.useEffect)(()=>{d||(async()=>{d||((0,i.f4)(u)?c(u):c(await b()))})()},[]);let y="",p="";return(0,i.J6)(l)&&(y=i.L0[l].label,p=l.slice(1)),{label:y,onSubmit:async o=>{if((0,i.J6)(l))if("/submit"===l)try{await f(),t("/thoughtrecords")}catch(r){r instanceof Error&&e({status:"error",description:"problem submitting"})}else{const r=l.slice(1),s=(0,i.f4)(d)?d.key:"",u=i.b1.indexOf(l)+1;try{const e=await v(o,s,r);t(i.b1[u],{state:(0,a.A)({},e)})}catch(n){e({status:"error",description:"problem with update"})}}},isSubmitting:g,currentQuestion:p,thoughtRecord:d,isValidQuestion:h}}}}]);
//# sourceMappingURL=578.bddd080e.chunk.js.map