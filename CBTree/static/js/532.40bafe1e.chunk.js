"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[532],{858(t,e,n){n.d(e,{Jt:()=>O,SD:()=>N,TB:()=>k,lm:()=>A,q7:()=>F,s1:()=>W,w_:()=>I,zW:()=>S});var i=n(3216),o=n(9611),r=n.n(o),a=n(7686),s=n(1195),l=n(5043);function u(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(o[n]=t[n]);return o}function d(){return d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},d.apply(this,arguments)}var c={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},m={position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},h={position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},f={position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},v={position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}};function y(t){var e;switch(null!=(e=null==t?void 0:t.direction)?e:"right"){case"right":default:return h;case"left":return m;case"bottom":return v;case"top":return f}}var x={enter:{duration:.2,ease:c.easeOut},exit:{duration:.1,ease:c.easeIn}},g=function(t,e){return d({},t,{delay:(0,i.Et)(e)?e:null==e?void 0:e.enter})},p=function(t,e){return d({},t,{delay:(0,i.Et)(e)?e:null==e?void 0:e.exit})},E=["in","unmountOnExit","animateOpacity","startingHeight","endingHeight","style","className","transition","transitionEnd"],b={exit:{height:{duration:.2,ease:c.ease},opacity:{duration:.3,ease:c.ease}},enter:{height:{duration:.3,ease:c.ease},opacity:{duration:.4,ease:c.ease}}},w={exit:function(t){var e,n,i=t.animateOpacity,o=t.startingHeight,r=t.transition,a=t.transitionEnd,s=t.delay;return d({},i&&{opacity:(n=o,null!=n&&parseInt(n.toString(),10)>0?1:0)},{height:o,transitionEnd:null==a?void 0:a.exit,transition:null!=(e=null==r?void 0:r.exit)?e:p(b.exit,s)})},enter:function(t){var e,n=t.animateOpacity,i=t.endingHeight,o=t.transition,r=t.transitionEnd,a=t.delay;return d({},n&&{opacity:1},{height:i,transitionEnd:null==r?void 0:r.enter,transition:null!=(e=null==o?void 0:o.enter)?e:g(b.enter,a)})}},N=l.forwardRef(function(t,e){var n=t.in,o=t.unmountOnExit,c=t.animateOpacity,m=void 0===c||c,h=t.startingHeight,f=void 0===h?0:h,v=t.endingHeight,y=void 0===v?"auto":v,x=t.style,g=t.className,p=t.transition,b=t.transitionEnd,N=u(t,E),R=l.useState(!1),A=R[0],S=R[1];l.useEffect(function(){var t=setTimeout(function(){S(!0)});return function(){return clearTimeout(t)}},[]),(0,i.R8)({condition:Boolean(f>0&&o),message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});var T=parseFloat(f.toString())>0,k={startingHeight:f,endingHeight:y,animateOpacity:m,transition:A?p:{enter:{duration:0}},transitionEnd:r()(b,{exit:o?void 0:{display:T?"block":"none"}})},O=!o||n,j=n||o?"enter":"exit";return l.createElement(s.N,{initial:!1,custom:k},O&&l.createElement(a.P.div,d({ref:e},N,{className:(0,i.cx)("chakra-collapse",g),style:d({overflow:"hidden",display:"block"},x),custom:k,variants:w,initial:!!o&&"exit",animate:j,exit:"exit"})))});i.gt&&(N.displayName="Collapse");var R=["unmountOnExit","in","className","transition","transitionEnd","delay"],A={initial:"exit",animate:"enter",exit:"exit",variants:{enter:function(t){var e,n=void 0===t?{}:t,i=n.transition,o=n.transitionEnd,r=n.delay;return{opacity:1,transition:null!=(e=null==i?void 0:i.enter)?e:g(x.enter,r),transitionEnd:null==o?void 0:o.enter}},exit:function(t){var e,n=void 0===t?{}:t,i=n.transition,o=n.transitionEnd,r=n.delay;return{opacity:0,transition:null!=(e=null==i?void 0:i.exit)?e:p(x.exit,r),transitionEnd:null==o?void 0:o.exit}}}},S=l.forwardRef(function(t,e){var n=t.unmountOnExit,o=t.in,r=t.className,c=t.transition,m=t.transitionEnd,h=t.delay,f=u(t,R),v=o||n?"enter":"exit",y=!n||o&&n,x={transition:c,transitionEnd:m,delay:h};return l.createElement(s.N,{custom:x},y&&l.createElement(a.P.div,d({ref:e,className:(0,i.cx)("chakra-fade",r),custom:x},A,{animate:v},f)))});i.gt&&(S.displayName="Fade");var T=["unmountOnExit","in","reverse","initialScale","className","transition","transitionEnd","delay"],k={initial:"exit",animate:"enter",exit:"exit",variants:{exit:function(t){var e,n=t.reverse,i=t.initialScale,o=t.transition,r=t.transitionEnd,a=t.delay;return d({opacity:0},n?{scale:i,transitionEnd:null==r?void 0:r.exit}:{transitionEnd:d({scale:i},null==r?void 0:r.exit)},{transition:null!=(e=null==o?void 0:o.exit)?e:p(x.exit,a)})},enter:function(t){var e,n=t.transitionEnd,i=t.transition,o=t.delay;return{opacity:1,scale:1,transition:null!=(e=null==i?void 0:i.enter)?e:g(x.enter,o),transitionEnd:null==n?void 0:n.enter}}}},O=l.forwardRef(function(t,e){var n=t.unmountOnExit,o=t.in,r=t.reverse,c=void 0===r||r,m=t.initialScale,h=void 0===m?.95:m,f=t.className,v=t.transition,y=t.transitionEnd,x=t.delay,g=u(t,T),p=!n||o&&n,E=o||n?"enter":"exit",b={initialScale:h,reverse:c,transition:v,transitionEnd:y,delay:x};return l.createElement(s.N,{custom:b},p&&l.createElement(a.P.div,d({ref:e,className:(0,i.cx)("chakra-offset-slide",f)},k,{animate:E,custom:b},g)))});i.gt&&(O.displayName="ScaleFade");var j=["direction","style","unmountOnExit","in","className","transition","transitionEnd","delay"],C={exit:{duration:.15,ease:c.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},H={exit:function(t){var e,n=t.direction,i=t.transition,o=t.transitionEnd,r=t.delay;return d({},y({direction:n}).exit,{transition:null!=(e=null==i?void 0:i.exit)?e:p(C.exit,r),transitionEnd:null==o?void 0:o.exit})},enter:function(t){var e,n=t.direction,i=t.transitionEnd,o=t.transition,r=t.delay;return d({},y({direction:n}).enter,{transition:null!=(e=null==o?void 0:o.enter)?e:g(C.enter,r),transitionEnd:null==i?void 0:i.enter})}},F=l.forwardRef(function(t,e){var n=t.direction,o=void 0===n?"right":n,r=t.style,c=t.unmountOnExit,m=t.in,h=t.className,f=t.transition,v=t.transitionEnd,x=t.delay,g=u(t,j),p=y({direction:o}),E=Object.assign({position:"fixed"},p.position,r),b=!c||m&&c,w=m||c?"enter":"exit",N={transitionEnd:v,transition:f,direction:o,delay:x};return l.createElement(s.N,{custom:N},b&&l.createElement(a.P.div,d({},g,{ref:e,initial:"exit",className:(0,i.cx)("chakra-slide",h),animate:w,exit:"exit",custom:N,variants:H,style:E})))});i.gt&&(F.displayName="Slide");var D=["unmountOnExit","in","reverse","className","offsetX","offsetY","transition","transitionEnd","delay"],I={initial:"initial",animate:"enter",exit:"exit",variants:{initial:function(t){var e,n=t.offsetX,i=t.offsetY,o=t.transition,r=t.transitionEnd,a=t.delay;return{opacity:0,x:n,y:i,transition:null!=(e=null==o?void 0:o.exit)?e:p(x.exit,a),transitionEnd:null==r?void 0:r.exit}},enter:function(t){var e,n=t.transition,i=t.transitionEnd,o=t.delay;return{opacity:1,x:0,y:0,transition:null!=(e=null==n?void 0:n.enter)?e:g(x.enter,o),transitionEnd:null==i?void 0:i.enter}},exit:function(t){var e,n=t.offsetY,i=t.offsetX,o=t.transition,r=t.transitionEnd,a=t.reverse,s=t.delay,l={x:i,y:n};return d({opacity:0,transition:null!=(e=null==o?void 0:o.exit)?e:p(x.exit,s)},a?d({},l,{transitionEnd:null==r?void 0:r.exit}):{transitionEnd:d({},l,null==r?void 0:r.exit)})}}},W=l.forwardRef(function(t,e){var n=t.unmountOnExit,o=t.in,r=t.reverse,c=void 0===r||r,m=t.className,h=t.offsetX,f=void 0===h?0:h,v=t.offsetY,y=void 0===v?8:v,x=t.transition,g=t.transitionEnd,p=t.delay,E=u(t,D),b=!n||o&&n,w=o||n?"enter":"exit",N={offsetX:f,offsetY:y,reverse:c,transition:x,transitionEnd:g,delay:p};return l.createElement(s.N,{custom:N},b&&l.createElement(a.P.div,d({ref:e,className:(0,i.cx)("chakra-offset-slide",m),custom:N},I,{animate:w},E)))});i.gt&&(W.displayName="SlideFade")},4746(t,e,n){n.d(e,{A:()=>u});var i=n(9379),o=n(5043),r=n(7152),a=n(6451),s=n(1806);const l=t=>({key:"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),userKey:t,timeCreated:Date.now()}),u=()=>{const{currentUser:t,logout:e,updateUser:n}=(0,r.A)(),[u,d]=(0,o.useState)(!1),c=()=>{if(!t)throw e(),Error("Not signed in");return t},m=t=>(0,s.wF)().filter(e=>e.userKey===t),h=(t,e)=>{const n=(0,s.wF)().filter(e=>e.userKey!==t);(0,s.FW)([...n,...e])},f=t=>{n(t)},v=async t=>{if(u)throw Error("Already submitting");d(!0);const e=t();return d(!1),e};return{deleteThoughtRecord:async t=>v(()=>{const e=c(),n=m(e.username).filter(e=>e.key!==t);h(e.username,n);const o=(0,i.A)((0,i.A)({},e),{},{thoughtRecords:e.thoughtRecords.filter(e=>e!==t),activeThoughtRecord:e.activeThoughtRecord===t?null:e.activeThoughtRecord});return f(o),t}),getAllThoughtRecords:async()=>v(()=>{const t=c();return m(t.username)}),updateThoughtRecord:async(t,e,n)=>v(()=>{const o=c(),r=m(o.username),a=r.findIndex(t=>t.key===e);if(a<0)throw Error("Record not found");const s=(0,i.A)((0,i.A)({},r[a]),{},{[n]:t}),l=[...r];return l[a]=s,h(o.username,l),s}),getActiveThoughtRecord:async()=>v(()=>{const t=c(),e=m(t.username),n=t.activeThoughtRecord?e.find(e=>e.key===t.activeThoughtRecord):void 0;if(n&&(0,a.f4)(n))return n;const o=l(t.username);return h(t.username,[...e,o]),f((0,i.A)((0,i.A)({},t),{},{activeThoughtRecord:o.key,thoughtRecords:Array.from(new Set([...t.thoughtRecords||[],o.key]))})),o}),getNewThoughtRecord:async()=>v(()=>{const t=c(),e=m(t.username),n=l(t.username);return h(t.username,[...e,n]),f((0,i.A)((0,i.A)({},t),{},{activeThoughtRecord:n.key,thoughtRecords:Array.from(new Set([...t.thoughtRecords||[],n.key]))})),n}),isSubmitting:u,saveThoughtRecord:async()=>v(()=>{const t=c(),e=(0,i.A)((0,i.A)({},t),{},{activeThoughtRecord:null});return f(e),e}),editThoughtRecord:async t=>v(()=>{const e=c(),n=m(e.username).find(e=>e.key===t);if(!n)throw Error("Invalid return");return f((0,i.A)((0,i.A)({},e),{},{activeThoughtRecord:n.key})),n})}}},6451(t,e,n){n.d(e,{J6:()=>o,L0:()=>a,b1:()=>r,f4:()=>s,fK:()=>i});const i=(t,e)=>t in e,o=t=>r.includes(t),r=["/emotion","/situationquestion","/mood","/thoughts","/evidencefor","/evidenceagainst","/alternativethought","/rerateemotion","/submit"],a={"/emotion":{label:"How do you feel?",type:"Emotion"},"/situationquestion":{label:"What is the Situation?",type:"Text"},"/mood":{label:"Add any emotions you felt and rate them",type:"Mood"},"/thoughts":{label:"List any thoughts and rate your Belief",type:"Thoughts"},"/evidencefor":{label:"What is the Evidence for",type:"Text"},"/evidenceagainst":{label:"What is the Evidence Against",type:"Text"},"/alternativethought":{label:"",type:"Text"},"/rerateemotion":{label:"How do you feel?",type:"Emotion"},"/submit":{label:"something",type:"Submit"}},s=t=>!!t&&"timeCreated"in t},7532(t,e,n){n.r(e),n.d(e,{default:()=>x,emotions:()=>y});var i=n(858),o=n(4450),r=n(2554),a=n(5043),s=n(1206),l=n(572),u=n(2127),d=n(579);const c=t=>{let{emotionName:e,setSelected:n,selected:i}=t;const o=y.filter(t=>e===t.emotionName)[0],{emotionColor:r,icon:a}=o,c=(0,s.dU)("black","white"),m=(0,l.AD)({base:"3x",md:"5x",lg:"9x"}),h=(t=>i&&t!==i?c:r)(e);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(u.g,{size:m,onClick:()=>(t=>{n(t===i?"":t)})(e),"aria-label":"".concat(e," button"),color:h,icon:a})})};var m=n(8426),h=n(7748),f=n(2639),v=n(6451);const y=[{icon:f.lbD,emotionColor:"#322659",emotionName:"Awful"},{icon:f.Lz9,emotionColor:"#2C5282",emotionName:"Meh"},{icon:f.H82,emotionColor:"#68D391",emotionName:"Good"},{icon:f.pj,emotionColor:"#F6E05E",emotionName:"Awesome"}],x=()=>{const[t,e]=(0,a.useState)(""),n=(t=>{var e;return null===(e=y.filter(e=>e.emotionName===t)[0])||void 0===e?void 0:e.emotionColor})(t),{label:s,isSubmitting:l,onSubmit:u,currentQuestion:f,thoughtRecord:x}=(0,h.A)();return(0,a.useEffect)(()=>{if(x&&(0,v.fK)(f,x)){const t=x[f];"string"===typeof t&&e(t)}},[f,x]),x?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(i.Jt,{in:!0,delay:{enter:.3},children:(0,d.jsx)(o.so,{p:2,minH:"80vh",children:(0,d.jsxs)(o.ov,{mt:4,rounded:"75px",border:t?"15px solid":"none",borderColor:n,mx:-20,w:{base:"auto",sm:"90vw",md:"100vw"},p:2,minHeight:"70vh",flexDir:"column",children:[(0,d.jsx)(o.DZ,{children:s}),(0,d.jsx)(o.zt,{height:"50%",mx:1,p:2,w:{base:"auto",lg:"80%"},spacing:{base:"9",md:"auto"},children:y.map(n=>{let{emotionName:i}=n;return(0,d.jsx)(c,{emotionName:i,selected:t,setSelected:e},i)})}),(0,d.jsx)(o.Tk,{p:2,w:"full",height:"10vh",spacing:6,children:t?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.DZ,{color:n,children:[" ",t," "]}),(0,d.jsx)(r.$n,{m:2,variant:"submit",isLoading:l,onClick:()=>u(t),w:"60%",minH:"40px",children:"Submit"})]}):null})]})})})}):(0,d.jsx)(m.A,{})}},7748(t,e,n){n.d(e,{A:()=>u});var i=n(9379),o=n(7039),r=n(5043),a=n(835),s=n(6451),l=n(4746);const u=()=>{const t=(0,o.dj)(),e=(0,a.Zp)(),{pathname:n,state:u}=(0,a.zy)(),[d,c]=(0,r.useState)(),[m,h]=(0,r.useState)(null),{updateThoughtRecord:f,getActiveThoughtRecord:v,isSubmitting:y,saveThoughtRecord:x}=(0,l.A)();(0,r.useEffect)(()=>{if(!m&&(0,s.J6)(n)&&d){const t=((t,e)=>{for(let n of s.b1){let i=n.slice(1);if(n===t)return n;if((0,s.fK)(i,e)&&null===e[i])return n}return t})(n,d);t!==n?e(t):h(!0)}},[m,e,n,d]),(0,r.useEffect)(()=>{d||(async()=>{d||((0,s.f4)(u)?c(u):c(await v()))})()},[]);let g="",p="";return(0,s.J6)(n)&&(g=s.L0[n].label,p=n.slice(1)),{label:g,onSubmit:async o=>{if((0,s.J6)(n))if("/submit"===n)try{await x(),e("/thoughtrecords")}catch(r){r instanceof Error&&t({status:"error",description:"problem submitting"})}else{const r=n.slice(1),l=(0,s.f4)(d)?d.key:"",u=s.b1.indexOf(n)+1;try{const t=await f(o,l,r);e(s.b1[u],{state:(0,i.A)({},t)})}catch(a){t({status:"error",description:"problem with update"})}}},isSubmitting:y,currentQuestion:p,thoughtRecord:d,isValidQuestion:m}}}}]);
//# sourceMappingURL=532.40bafe1e.chunk.js.map