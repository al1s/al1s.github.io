"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[203],{1555(e,t,o){o.d(t,{A:()=>h});var n=o(7727),r=o(2554),i=o(8510),s=o(4450),l=o(858),a=o(5043),d=o(2645),c=o(7748),u=o(579);const h=e=>{let{isSubmitting:t,moods:o,setMoods:h,selectOptions:m,label:g}=e;const{currentQuestion:f}=(0,c.A)(),[b,y]=(0,a.useState)("");return(0,u.jsxs)(u.Fragment,{children:["reratemoods"!==f?(0,u.jsxs)(l.s1,{offsetY:0,offsetX:50,transition:{enter:{delay:.2,duration:.5},exit:{delay:.4,duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",height:"auto",width:"100%"},in:!t,children:[(0,u.jsxs)(s.az,{p:2,w:"92%",mt:6,mb:2,mx:7,children:[(0,u.jsx)(i.lR,{mb:2,color:"white",fontSize:14,children:g}),(0,u.jsx)(n.qJ,{size:"md",onChange:(e,t)=>{e&&y(e.value)},options:m})]}),(0,u.jsx)(r.$n,{alignSelf:"center",onClick:()=>{return e=b,void(!o.map(e=>e.mood).includes(e)&&e&&h([...o,{mood:e,moodRating:0}]));var e},w:"60%",minH:10,my:6,children:"Add"})]}):(0,u.jsxs)(s.DZ,{children:[" ",g," "]}),(0,u.jsx)(d.A,{moods:o,setMoods:h})]})}},2645(e,t,o){o.d(t,{A:()=>b,v:()=>m});var n=o(2554),r=o(4450),i=o(4162),s=o(9292),l=o(858),a=o(4034),d=o(5043),c=o(3399),u=o(7748),h=o(579);const m=e=>e<25?"green.400":e<50?"yellow.600":e<75?"orange.400":"red.800",g=e=>{let{deleteHandler:t,mood:o,moodRating:n,sliderChange:a}=e;const{currentQuestion:g}=(0,u.A)(),[b,y]=(0,d.useState)(!1),{foregroundColor:x}=(0,c.A)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.zW,{in:!b,transition:{enter:{duration:.5},exit:{duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",height:"auto",width:"100%"},children:(0,h.jsx)(r.az,{w:{base:"full",lg:"80%"},my:3,alignSelf:"center",children:(0,h.jsxs)(r.zt,{rounded:"2xl",mx:3,bg:x,pl:2,minH:20,pr:1,justifyContent:"center",children:[(0,h.jsxs)(r.Tk,{ml:2,spacing:2,p:1,w:"100%",children:[(0,h.jsx)(r.EY,{w:"100%",textAlign:"left",children:o}),(0,h.jsxs)(i.Ap,{colorScheme:m(n).slice(0,-4),ml:2,mr:1,mb:2,onChange:e=>a(e),value:n,children:[(0,h.jsx)(i.hB,{children:(0,h.jsx)(i.hJ,{})}),(0,h.jsx)(s.m,{hasArrow:!0,zIndex:-9999,fontSize:"sm",bg:m(n),color:"white",placement:"right",isOpen:!b,label:"".concat(n,"%"),children:(0,h.jsx)(i.OQ,{bg:"teal.400"})})]})]}),"reratemoods"!==g?(0,h.jsx)(f,{deleteHandler:()=>(e=>{y(!0),setTimeout(e,500)})(t)}):null]})})})})},f=e=>{let{deleteHandler:t}=e;return(0,h.jsx)(n.K0,{color:"black","aria-label":"Delete Mood",variant:"ghost",size:"sm",icon:(0,h.jsx)(a.US,{}),onClick:t})},b=e=>{let{moods:t,setMoods:o}=e;return(0,h.jsx)(r.ov,{flexDirection:"column",w:"100%",mt:0,mb:0,children:t.map(e=>{let{mood:n,moodRating:r}=e;return(0,h.jsx)(g,{mood:n,deleteHandler:()=>{return e=n,void o(t.filter(t=>t.mood!==e));var e},sliderChange:(i=n,e=>{o(t=>t.map(t=>t.mood===i?{mood:t.mood,moodRating:e}:t))}),moodRating:r},n);var i})})}},3203(e,t,o){o.r(t),o.d(t,{default:()=>f});var n=o(9379),r=o(5043);const i=JSON.parse('[{"label":"I can\u2019t do this"},{"label":"I\u2019ll try"},{"label":"There\u2019s no use in trying"},{"label":"Let me do my best"},{"label":"I can deal with this problem one step at a time"},{"label":"Everyone will laugh at me"},{"label":"I have good ideas"},{"label":"I\u2019ve never been able to succeed"},{"label":"I don\u2019t deserve to be loved"},{"label":"I am worthy of more"},{"label":"What\u2019s the worst that can happen"},{"label":"I have valuable talents"},{"label":"So what if I don\u2019t live up to my expectations"},{"label":"Nobody\u2019s perfect"},{"label":"I can do some things well, and there are some things I need to work on"}]');var s=o(1555),l=o(858),a=o(2554),d=o(4450),c=o(3399),u=o(579);const h=e=>{let{thoughts:t,onSelect:o,selected:n}=e;const{foregroundColor:r}=(0,c.A)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.DZ,{mt:4,mx:4,textAlign:"center",children:"Choose the Hot Thought"}),(0,u.jsx)(d.ov,{p:4,flexDirection:"column",mx:2,w:"100%",minHeight:"50vh",justifyContent:"space-evenly",children:t.map(e=>(0,u.jsx)(d.ov,{p:2,rounded:"2xl",fontSize:14,color:n===e?"white":"inital",minH:"10vh",width:"90%",bg:n===e?"red.500":r,onClick:()=>o(e),children:e},e))})]})};var m=o(7748),g=o(8426);const f=()=>{const e=i.map(e=>(0,n.A)((0,n.A)({},e),{},{value:e.label})),[t,o]=(0,r.useState)([]),[d,f]=(0,r.useState)(""),{label:b,onSubmit:y,isSubmitting:x,thoughtRecord:v}=(0,m.A)(),[p,w]=(0,r.useState)(!1),{foregroundColor:A}=(0,c.A)();(0,r.useEffect)(()=>{null!==v&&void 0!==v&&v.thoughts&&o(v.thoughts.thoughts)},[v,o]);const j=t.map(e=>e.mood);return v?(0,u.jsxs)(u.Fragment,{children:[p?(0,u.jsx)(l.s1,{in:!x,offsetY:-100,transition:{enter:{delay:.3,duration:.5},exit:{delay:.5,duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",minHeight:"50%",width:"100%"},children:(0,u.jsx)(h,{thoughts:j,onSelect:e=>{f(e)},selected:d})}):(0,u.jsx)(s.A,{moods:t,isSubmitting:x,setMoods:o,selectOptions:e,label:b}),t.length>0?(0,u.jsx)(l.s1,{offsetY:50,transition:{enter:{delay:.4,duration:.5},exit:{delay:.3,duration:.5}},style:{flexDirection:"column",alignItems:"center",display:"flex",minHeight:"auto",width:"100%"},in:!x,children:(0,u.jsx)(a.$n,{mb:2,minH:10,w:"60%",mt:8,isLoading:x,bg:A,loadingText:"Submitting",onClick:()=>{p?d&&y({thoughts:t,hotThought:d}):w(!0)},children:"Submit"})}):null]}):(0,u.jsx)(g.A,{})}},4746(e,t,o){o.d(t,{A:()=>d});var n=o(9379),r=o(5043),i=o(7152),s=o(6451),l=o(1806);const a=e=>({key:"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),userKey:e,timeCreated:Date.now()}),d=()=>{const{currentUser:e,logout:t,updateUser:o}=(0,i.A)(),[d,c]=(0,r.useState)(!1),u=()=>{if(!e)throw t(),Error("Not signed in");return e},h=e=>(0,l.wF)().filter(t=>t.userKey===e),m=(e,t)=>{const o=(0,l.wF)().filter(t=>t.userKey!==e);(0,l.FW)([...o,...t])},g=e=>{o(e)},f=async e=>{if(d)throw Error("Already submitting");c(!0);const t=e();return c(!1),t};return{deleteThoughtRecord:async e=>f(()=>{const t=u(),o=h(t.username).filter(t=>t.key!==e);m(t.username,o);const r=(0,n.A)((0,n.A)({},t),{},{thoughtRecords:t.thoughtRecords.filter(t=>t!==e),activeThoughtRecord:t.activeThoughtRecord===e?null:t.activeThoughtRecord});return g(r),e}),getAllThoughtRecords:async()=>f(()=>{const e=u();return h(e.username)}),updateThoughtRecord:async(e,t,o)=>f(()=>{const r=u(),i=h(r.username),s=i.findIndex(e=>e.key===t);if(s<0)throw Error("Record not found");const l=(0,n.A)((0,n.A)({},i[s]),{},{[o]:e}),a=[...i];return a[s]=l,m(r.username,a),l}),getActiveThoughtRecord:async()=>f(()=>{const e=u(),t=h(e.username),o=e.activeThoughtRecord?t.find(t=>t.key===e.activeThoughtRecord):void 0;if(o&&(0,s.f4)(o))return o;const r=a(e.username);return m(e.username,[...t,r]),g((0,n.A)((0,n.A)({},e),{},{activeThoughtRecord:r.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],r.key]))})),r}),getNewThoughtRecord:async()=>f(()=>{const e=u(),t=h(e.username),o=a(e.username);return m(e.username,[...t,o]),g((0,n.A)((0,n.A)({},e),{},{activeThoughtRecord:o.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],o.key]))})),o}),isSubmitting:d,saveThoughtRecord:async()=>f(()=>{const e=u(),t=(0,n.A)((0,n.A)({},e),{},{activeThoughtRecord:null});return g(t),t}),editThoughtRecord:async e=>f(()=>{const t=u(),o=h(t.username).find(t=>t.key===e);if(!o)throw Error("Invalid return");return g((0,n.A)((0,n.A)({},t),{},{activeThoughtRecord:o.key})),o})}}},6451(e,t,o){o.d(t,{J6:()=>r,L0:()=>s,b1:()=>i,f4:()=>l,fK:()=>n});const n=(e,t)=>e in t,r=e=>i.includes(e),i=["/emotion","/situationquestion","/mood","/thoughts","/evidencefor","/evidenceagainst","/alternativethought","/rerateemotion","/submit"],s={"/emotion":{label:"How do you feel?",type:"Emotion"},"/situationquestion":{label:"What is the Situation?",type:"Text"},"/mood":{label:"Add any emotions you felt and rate them",type:"Mood"},"/thoughts":{label:"List any thoughts and rate your Belief",type:"Thoughts"},"/evidencefor":{label:"What is the Evidence for",type:"Text"},"/evidenceagainst":{label:"What is the Evidence Against",type:"Text"},"/alternativethought":{label:"",type:"Text"},"/rerateemotion":{label:"How do you feel?",type:"Emotion"},"/submit":{label:"something",type:"Submit"}},l=e=>!!e&&"timeCreated"in e},7748(e,t,o){o.d(t,{A:()=>d});var n=o(9379),r=o(7039),i=o(5043),s=o(835),l=o(6451),a=o(4746);const d=()=>{const e=(0,r.dj)(),t=(0,s.Zp)(),{pathname:o,state:d}=(0,s.zy)(),[c,u]=(0,i.useState)(),[h,m]=(0,i.useState)(null),{updateThoughtRecord:g,getActiveThoughtRecord:f,isSubmitting:b,saveThoughtRecord:y}=(0,a.A)();(0,i.useEffect)(()=>{if(!h&&(0,l.J6)(o)&&c){const e=((e,t)=>{for(let o of l.b1){let n=o.slice(1);if(o===e)return o;if((0,l.fK)(n,t)&&null===t[n])return o}return e})(o,c);e!==o?t(e):m(!0)}},[h,t,o,c]),(0,i.useEffect)(()=>{c||(async()=>{c||((0,l.f4)(d)?u(d):u(await f()))})()},[]);let x="",v="";return(0,l.J6)(o)&&(x=l.L0[o].label,v=o.slice(1)),{label:x,onSubmit:async r=>{if((0,l.J6)(o))if("/submit"===o)try{await y(),t("/thoughtrecords")}catch(i){i instanceof Error&&e({status:"error",description:"problem submitting"})}else{const i=o.slice(1),a=(0,l.f4)(c)?c.key:"",d=l.b1.indexOf(o)+1;try{const e=await g(r,a,i);t(l.b1[d],{state:(0,n.A)({},e)})}catch(s){e({status:"error",description:"problem with update"})}}},isSubmitting:b,currentQuestion:v,thoughtRecord:c,isValidQuestion:h}}}}]);
//# sourceMappingURL=203.b0f8b590.chunk.js.map