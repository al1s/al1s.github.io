"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[572],{4746(e,r,t){t.d(r,{A:()=>l});var a=t(9379),o=t(5043),n=t(7152),i=t(6451),s=t(1806);const c=e=>({key:"".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2)),userKey:e,timeCreated:Date.now()}),l=()=>{const{currentUser:e,logout:r,updateUser:t}=(0,n.A)(),[l,d]=(0,o.useState)(!1),u=()=>{if(!e)throw r(),Error("Not signed in");return e},h=e=>(0,s.wF)().filter(r=>r.userKey===e),g=(e,r)=>{const t=(0,s.wF)().filter(r=>r.userKey!==e);(0,s.FW)([...t,...r])},m=e=>{t(e)},v=async e=>{if(l)throw Error("Already submitting");d(!0);const r=e();return d(!1),r};return{deleteThoughtRecord:async e=>v(()=>{const r=u(),t=h(r.username).filter(r=>r.key!==e);g(r.username,t);const o=(0,a.A)((0,a.A)({},r),{},{thoughtRecords:r.thoughtRecords.filter(r=>r!==e),activeThoughtRecord:r.activeThoughtRecord===e?null:r.activeThoughtRecord});return m(o),e}),getAllThoughtRecords:async()=>v(()=>{const e=u();return h(e.username)}),updateThoughtRecord:async(e,r,t)=>v(()=>{const o=u(),n=h(o.username),i=n.findIndex(e=>e.key===r);if(i<0)throw Error("Record not found");const s=(0,a.A)((0,a.A)({},n[i]),{},{[t]:e}),c=[...n];return c[i]=s,g(o.username,c),s}),getActiveThoughtRecord:async()=>v(()=>{const e=u(),r=h(e.username),t=e.activeThoughtRecord?r.find(r=>r.key===e.activeThoughtRecord):void 0;if(t&&(0,i.f4)(t))return t;const o=c(e.username);return g(e.username,[...r,o]),m((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:o.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],o.key]))})),o}),getNewThoughtRecord:async()=>v(()=>{const e=u(),r=h(e.username),t=c(e.username);return g(e.username,[...r,t]),m((0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:t.key,thoughtRecords:Array.from(new Set([...e.thoughtRecords||[],t.key]))})),t}),isSubmitting:l,saveThoughtRecord:async()=>v(()=>{const e=u(),r=(0,a.A)((0,a.A)({},e),{},{activeThoughtRecord:null});return m(r),r}),editThoughtRecord:async e=>v(()=>{const r=u(),t=h(r.username).find(r=>r.key===e);if(!t)throw Error("Invalid return");return m((0,a.A)((0,a.A)({},r),{},{activeThoughtRecord:t.key})),t})}}},6451(e,r,t){t.d(r,{J6:()=>o,L0:()=>i,b1:()=>n,f4:()=>s,fK:()=>a});const a=(e,r)=>e in r,o=e=>n.includes(e),n=["/emotion","/situationquestion","/mood","/thoughts","/evidencefor","/evidenceagainst","/alternativethought","/rerateemotion","/submit"],i={"/emotion":{label:"How do you feel?",type:"Emotion"},"/situationquestion":{label:"What is the Situation?",type:"Text"},"/mood":{label:"Add any emotions you felt and rate them",type:"Mood"},"/thoughts":{label:"List any thoughts and rate your Belief",type:"Thoughts"},"/evidencefor":{label:"What is the Evidence for",type:"Text"},"/evidenceagainst":{label:"What is the Evidence Against",type:"Text"},"/alternativethought":{label:"",type:"Text"},"/rerateemotion":{label:"How do you feel?",type:"Emotion"},"/submit":{label:"something",type:"Submit"}},s=e=>!!e&&"timeCreated"in e},9572(e,r,t){t.r(r),t.d(r,{default:()=>T});var a=t(5983),o=t(2554),n=t(2892),i=t(346),s=t(3216),c=t(5043),l=t(636);function d(e,r){if(null==e)return{};var t,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)t=n[a],r.indexOf(t)>=0||(o[t]=e[t]);return o}function u(){return u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},u.apply(this,arguments)}var h=["name","getInitials"],g=["src","srcSet","name","showBorder","borderRadius","onError","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback"],m=(0,i.Rf)(function(e,r){var t=u({position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",insetEnd:"0",bottom:"0"},(0,i.IS)().badge);return c.createElement(i.Bv.div,u({ref:r},e,{className:(0,s.cx)("chakra-avatar__badge",e.className),__css:t}))});function v(e){var r=e.split(" "),t=r[0],a=r[1];return t&&a?""+t.charAt(0)+a.charAt(0):t.charAt(0)}s.gt&&(m.displayName="AvatarBadge");var f=function(e){var r=e.name,t=e.getInitials,a=d(e,h),o=(0,i.IS)();return c.createElement(i.Bv.div,u({role:"img","aria-label":r},a,{__css:o.label}),r?null==t?void 0:t(r):null)},b=function(e){return c.createElement(i.Bv.svg,u({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},e),c.createElement("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),c.createElement("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))},y={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},p=(0,i.Rf)(function(e,r){var t=(0,i.o5)("Avatar",e),a=(0,i.MN)(e),o=a.src,n=a.srcSet,l=a.name,h=a.showBorder,m=a.borderRadius,f=void 0===m?"full":m,p=a.onError,R=a.getInitials,A=void 0===R?v:R,k=a.icon,_=void 0===k?c.createElement(b,null):k,E=a.iconLabel,C=void 0===E?" avatar":E,N=a.loading,j=a.children,w=a.borderColor,T=a.ignoreFallback,I=d(a,g),S=u({borderRadius:f,borderWidth:h?"2px":void 0},y,t.container);return w&&(S.borderColor=w),c.createElement(i.Bv.span,u({ref:r},I,{className:(0,s.cx)("chakra-avatar",e.className),__css:S}),c.createElement(i.W$,{value:t},c.createElement(x,{src:o,srcSet:n,loading:N,onError:p,getInitials:A,name:l,borderRadius:f,icon:_,iconLabel:C,ignoreFallback:T}),j))});s.gt&&(p.displayName="Avatar");var x=function(e){var r=e.src,t=e.srcSet,a=e.onError,o=e.getInitials,s=e.name,l=e.borderRadius,d=e.loading,u=e.iconLabel,h=e.icon,g=void 0===h?c.createElement(b,null):h,m=e.ignoreFallback,v=(0,n.lK)({src:r,onError:a,ignoreFallback:m});return!r||!("loaded"===v)?s?c.createElement(f,{className:"chakra-avatar__initials",getInitials:o,name:s}):c.cloneElement(g,{role:"img","aria-label":u}):c.createElement(i.Bv.img,{src:r,srcSet:t,alt:s,className:"chakra-avatar__img",loading:d,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:l}})};s.gt&&(x.displayName="AvatarImage");var R=["children","borderColor","max","spacing","borderRadius"],A=(0,i.Rf)(function(e,r){var t=(0,i.o5)("Avatar",e),a=(0,i.MN)(e),o=a.children,n=a.borderColor,h=a.max,g=a.spacing,m=void 0===g?"-0.75rem":g,v=a.borderRadius,f=void 0===v?"full":v,b=d(a,R),p=(0,l.ag)(o),x=h?p.slice(0,h):p,A=null!=h&&p.length-h,k=x.reverse().map(function(r,t){var a,o={marginEnd:0===t?0:m,size:e.size,borderColor:null!=(a=r.props.borderColor)?a:n,showBorder:!0};return c.cloneElement(r,(0,s.TB)(o))}),_=u({borderRadius:f,marginStart:m},y,t.excessLabel);return c.createElement(i.Bv.div,u({ref:r,role:"group",__css:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexDirection:"row-reverse"}},b,{className:(0,s.cx)("chakra-avatar__group",e.className)}),A>0&&c.createElement(i.Bv.span,{className:"chakra-avatar__excess",__css:_},"+"+A),k)});s.gt&&(A.displayName="AvatarGroup");var k=t(4450),_=t(835),E=t(5475),C=t(7152),N=t(3399),j=t(4746),w=t(579);const T=e=>{let{displayName:r}=e;const{getNewThoughtRecord:t}=(0,j.A)(),{backgroundColor:n,foregroundColor:i}=(0,N.A)(),s=(0,_.Zp)(),{logout:c}=(0,C.A)();return(0,w.jsxs)(a.W1,{children:[(0,w.jsx)(a.IU,{bg:n,as:o.$n,rounded:"full",variant:"link",cursor:"pointer",minW:0,children:(0,w.jsx)(p,{name:r,size:"md",color:n,bg:i})}),(0,w.jsxs)(a.cO,{p:2,alignItems:"center",zIndex:"overlay",children:[(0,w.jsx)("br",{}),(0,w.jsx)(k.ov,{children:(0,w.jsx)(k.N_,{as:E.N_,to:"/profile",children:(0,w.jsx)(p,{size:"2xl",bg:n,color:i,name:r})})}),(0,w.jsx)("br",{}),(0,w.jsx)(k.ov,{children:(0,w.jsx)("p",{children:r})}),(0,w.jsx)("br",{}),(0,w.jsx)(a.Nj,{}),(0,w.jsx)(a.Dr,{children:(0,w.jsx)(k.N_,{as:E.N_,to:"/thoughtrecords",children:"Your Thought Records"})}),(0,w.jsx)(a.Dr,{onClick:async()=>{await t(),s("/emotion")},children:"New Thought Record"}),(0,w.jsx)(a.Dr,{children:(0,w.jsx)(k.N_,{as:E.N_,to:"/about",children:"About"})}),(0,w.jsx)(a.Dr,{onClick:()=>{c(),s("/login")},children:"Logout"})]})]})}}}]);
//# sourceMappingURL=572.0e1c0adf.chunk.js.map